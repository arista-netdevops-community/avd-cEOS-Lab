{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Arista Validated Designs with cEOS-lab","text":"<p>This repository contains labs with examples to quickly deploy:</p> <ul> <li>Arista cEOS-Lab (virtual) based Leaf Spine topology using containerlab.</li> <li>Configure the Leaf Spine topology using Arista Validated Designs (AVD) role.</li> </ul> <p>The repository currently contains the following prebuilt labs.</p> EVPN Symmetric IRB <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 2 L2 leafs + 4 Clients</p> <p></p> EVPN Symmetric IRB <p>iBGP Overlay and OSFP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 4 Clients</p> <p></p> EVPN Asymmetric IRB <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 4 Clients</p> <p></p> EVPN Centralized Anycast Gateway <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 1 MLAG Compute leaf pairs + 1 MLAG Service Leaf pair + 4 Clients</p> <p></p> EVPN VXLAN All-active Multi-homing IRB <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 4 PEs + 4 Clients</p> <p></p> EVPN Single-Active Multihoming Symmetric IRB <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 4 PEs + 4 Clients</p> <p></p> EVPN VXLAN Dual DC L3 Gateway <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC)</p> <p></p> EVPN VXLAN Dual DC Multi-Domain <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC)</p> <p></p> EVPN MPLS LDP All-Active Multihoming (L2EVPN) <p>iBGP Overlay and MPLS Underlay</p> <p>2 Ps + 4 PEs + 4 Clients</p> <p>using eos_cli_config_gen</p> <p></p> EVPN All-Active Multihoming IRB with MPLS Underlay <p>iBGP Overlay and MPLS Underlay</p> <p>2 Ps + 4 PEs + 4 Clients</p> <p>using eos_cli_config_gen</p> <p></p>"},{"location":"install/","title":"Installation","text":""},{"location":"install/#pre-requisites","title":"Pre-requisites","text":"<p>The following requirements must be satisfied to use the labs:</p> <ul> <li>The user should have <code>sudo</code> privileges</li> <li>A Linux host/server/VM</li> <li>Python 3.8 or later</li> <li>Install ansible-core from 2.12.6 to 2.15.x excluding 2.13.0</li> <li>Install arista.avd collection from Ansible Galaxy</li> <li>AVD additional Python requirements</li> <li>Docker</li> <li>containerlab</li> <li>Git</li> <li>Arista cEOS-Lab image (4.23.x or above)</li> <li>Alpine-host image</li> <li>Clone the repository using <code>git clone</code>.</li> </ul> HTTPSSSH <pre><code>git clone https://github.com/arista-netdevops-community/avd-cEOS-Lab.git\n</code></pre> <pre><code>git clone git@github.com:arista-netdevops-community/avd-cEOS-Lab.git\n</code></pre> Info <ul> <li>For Python3, docker and ansible-core installation please refer to the installation guides based on the host OS.</li> <li>For arista.avd installation please refer to the official documenation.</li> <li>For containerlab installation please refer to the official documentation.</li> </ul> Note <ul> <li>Containerlab topology definitions have changed starting v0.15 - Release Notes. Latest release of this repository is containerlab v0.15 (and above) compatible. For older containerlab compatible syntax download v1.1.2</li> <li>arista.avd v3.0.0 contains breaking changes to data models Release Notes. Latest release of this repository is arista.avd v3.0.0 and above compatible. For older avd compatible syntax download older release.</li> <li>Starting Python 3.10 the default SSL/TLS ciphers have been updated. Latest release of this repository updates the cipher suite on EOS via a security profile applied to eAPI to be compatible with Python 3.10.</li> </ul>"},{"location":"install/#installing-arista-ceos-lab-image","title":"Installing Arista cEOS-Lab image","text":"<ul> <li>Download the image from www.arista.com &gt; Software Downloads &gt; cEOS-Lab &gt; EOS-4.2x.y &gt; cEOS-lab-4.2x.y.tar.xz</li> <li>Copy the <code>cEOS-lab-4.2x.y.tar.xz</code> to the host/server/VM.</li> <li>Ensure Docker is already set up and running.</li> </ul> <pre><code>docker version\n</code></pre> <ul> <li>Next, use the tar file to import the cEOS-Lab image using the following command</li> </ul> <pre><code>docker import cEOS-lab.tar.xz ceosimage:TAG\n</code></pre> Example<pre><code>docker import cEOS64-lab-4.26.1F.tar.xz ceosimage:4.26.1F\n</code></pre> <ul> <li>Now you should be able to see the Arista cEOS-Lab image.</li> </ul> <pre><code>docker images | egrep \"REPO|ceos\"\n</code></pre> Reveal Output <pre><code>REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE\nceosimage             4.26.1F             41b309a15f5c        30 hours ago        1.71GB\n</code></pre>"},{"location":"install/#installing-the-alpine-host-image","title":"Installing the alpine-host image","text":"<p>Info</p> <p>You have the option to use Arista cEOS-Lab or any other Linux-based container as a client/host.</p> <p>In which case please update the <code>topology.yaml</code> in respective lab folders, as by default lab uses an alpine-host image for client/host containers</p> <ul> <li>Build the alpine-host image using the modified Dockerfile from docker-topo</li> <li>Navigate to <code>alpine_host</code> directory in this repository</li> </ul> <pre><code>\u251c\u2500\u2500 alpine_host\n   \u251c\u2500\u2500 Dockerfile\n   \u251c\u2500\u2500 README.md\n   \u251c\u2500\u2500 build.sh\n   \u2514\u2500\u2500 entrypoint.sh\n</code></pre> <ul> <li>Run the <code>build.sh</code> script</li> </ul> <pre><code>./build.sh\n</code></pre> <ul> <li>Verify the alpine-host image is created</li> </ul> <pre><code>docker images | egrep \"TAG|alpine\"\n</code></pre> Reveal Output <pre><code>REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE\nalpine-host           latest              eab21450c58c        30 hours ago        68.7MB\n</code></pre>"},{"location":"install/#ceos-lab-containerlab-template","title":"cEOS-Lab containerlab template","text":"<p>Note</p> <p>The below steps are no longer required for containerlab v0.15 and above.</p> <p>The v2.0.0 and above releases of this repository include this template in the <code>topology.yaml</code> itself.</p> <p>The Below steps are only required if using containerlab version less than v0.15</p> <p>Replace the containerlab cEOS default template with the <code>ceos.cfg.tpl</code> file from this repository.</p> <pre><code>ceos_lab_template\n\u2514\u2500\u2500 ceos.cfg.tpl\n</code></pre> Warning <p>If the default template is not replaced with the one from this repository, then for the initial AVD config replace you will observe a timeout error.</p> <p>The default template can be usually found at <code>/etc/containerlab/templates/arista/ceos.cfg.tpl</code></p> <p>This is to ensure the containers by default come up with:</p> <ul> <li> Multi agent routing model</li> <li> MGMT vrf for management connectivity</li> <li> eAPI enabled</li> </ul>"},{"location":"quickStart/","title":"Getting Started","text":"<p>This section provides an overview of the lab files and step-by-step instructions for deploying the lab.</p> <p>Follow the installation guide and ensure all prerequisites are satisfied.</p> <p>This demo will follow the deployment and configuration of the following lab</p> EVPN Symmetric IRB <p>eBGP Overlay and eBGP Underlay</p> <p>2 Spines + 2 MLAG Leaf Pairs + 2 L2 leafs + 4 Clients</p> <p></p>"},{"location":"quickStart/#lab-files","title":"Lab Files","text":"<ul> <li>Navigate to the <code>avd-cEOS-Lab/labs/evpn/avd_sym_irb</code> directory.</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_sym_irb\n</code></pre> <ul> <li>The following files are part of this lab</li> </ul> <pre><code>.\n\u251c\u2500\u2500 ansible.cfg\n\u251c\u2500\u2500 group_vars\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 AVD_LAB.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 DC1_CONNECTED_ENDPOINTS.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 DC1_FABRIC.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 DC1_L2_LEAFS.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 DC1_L3_LEAFS.yaml\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 DC1_NETWORK_SERVICES.yaml\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 DC1_SPINES.yaml\n\u251c\u2500\u2500 host_l3_config\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 l3_build.sh\n\u251c\u2500\u2500 inventory.yaml\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 playbooks\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 fabric-deploy-config.yaml\n\u2514\u2500\u2500 topology.yaml\n</code></pre> topology.yaml <pre><code>name: avdirb # (1)!\n\ntopology:\n  kinds:\n    ceos:\n      startup-config: ../../../ceos_lab_template/ceos.cfg.tpl # (2)!\n      image: ceosimage:4.30.1F # (3)!\n      exec: # (4)!\n        - sleep 10\n        - FastCli -p 15 -c 'security pki key generate rsa 4096 eAPI.key'\n        - FastCli -p 15 -c 'security pki certificate generate self-signed eAPI.crt key eAPI.key generate rsa 4096 validity 30000 parameters common-name eAPI'\n    linux:\n      image: alpine-host\n  nodes:\n    spine1:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.2\n    spine2:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.3\n    leaf1a:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.4\n    leaf1b:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.5\n    svc2a:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.6\n    svc2b:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.7\n    l2leaf2a:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.8\n    l2leaf2b:\n      kind: ceos\n      mgmt-ipv4: 172.100.100.9\n    client1:\n      kind: linux\n      mgmt-ipv4: 172.100.100.10\n      env:\n        TMODE: lacp # (5)!\n    client2:\n      kind: linux\n      mgmt-ipv4: 172.100.100.11\n      env:\n        TMODE: lacp\n    client3:\n      kind: linux\n      mgmt-ipv4: 172.100.100.12\n      env:\n        TMODE: lacp\n    client4:\n      kind: linux\n      mgmt-ipv4: 172.100.100.13\n      env:\n        TMODE: lacp\n\n  links: # (6)!\n    - endpoints: [\"leaf1a:eth1\", \"spine1:eth1\"]\n    - endpoints: [\"leaf1b:eth1\", \"spine1:eth2\"]\n    - endpoints: [\"svc2a:eth1\", \"spine1:eth3\"]\n    - endpoints: [\"svc2b:eth1\", \"spine1:eth4\"]\n    - endpoints: [\"leaf1a:eth2\", \"spine2:eth1\"]\n    - endpoints: [\"leaf1b:eth2\", \"spine2:eth2\"]\n    - endpoints: [\"svc2a:eth2\", \"spine2:eth3\"]\n    - endpoints: [\"svc2b:eth2\", \"spine2:eth4\"]\n    - endpoints: [\"leaf1a:eth3\", \"leaf1b:eth3\"]\n    - endpoints: [\"leaf1a:eth4\", \"leaf1b:eth4\"]\n    - endpoints: [\"svc2a:eth3\", \"svc2b:eth3\"]\n    - endpoints: [\"svc2a:eth4\", \"svc2b:eth4\"]\n    - endpoints: [\"svc2a:eth5\", \"l2leaf2a:eth1\"]\n    - endpoints: [\"svc2a:eth6\", \"l2leaf2b:eth1\"]\n    - endpoints: [\"svc2b:eth5\", \"l2leaf2a:eth2\"]\n    - endpoints: [\"svc2b:eth6\", \"l2leaf2b:eth2\"]\n    - endpoints: [\"l2leaf2a:eth3\", \"l2leaf2b:eth3\"]\n    - endpoints: [\"l2leaf2a:eth4\", \"l2leaf2b:eth4\"]\n    - endpoints: [\"leaf1a:eth5\", \"client1:eth1\"]\n    - endpoints: [\"leaf1b:eth5\", \"client1:eth2\"]\n    - endpoints: [\"leaf1a:eth6\", \"client2:eth1\"]\n    - endpoints: [\"leaf1b:eth6\", \"client2:eth2\"]\n    - endpoints: [\"l2leaf2a:eth5\", \"client3:eth1\"]\n    - endpoints: [\"l2leaf2b:eth5\", \"client3:eth2\"]\n    - endpoints: [\"l2leaf2a:eth6\", \"client4:eth1\"]\n    - endpoints: [\"l2leaf2b:eth6\", \"client4:eth2\"]\n\nmgmt: # (7)!\n  network: ceos_clab\n  ipv4-subnet: 172.100.100.0/24\n  ipv6-subnet: 2001:172:100:100::/80\n</code></pre> <ol> <li>containerlab toplogy name. The containers names will be generated using the following pattern: <code>clab-{{lab-name}}-{{node-name}}</code></li> <li>Template that cEOS-Lab node will use to build the baseline startup configuration.</li> <li>ceosimage that cEOS-Lab node will use to boot</li> <li>commands to generate a self-signed certificate for eAPI access</li> <li>bonding mode to use on alpine-host clients. Available modes are <code>lacp</code> <code>static</code> <code>active-backup</code> <code>none (default)</code>. For more details see Reference</li> <li>define connections between switches and with clients</li> <li>subnet for management IP allocation for the containers. Can be changed to avoid conflicts with host or multiple labs</li> </ol> inventory.yaml <pre><code>all:\n  children:\n    AVD_LAB:\n      children:\n        DC1_FABRIC:\n          children:\n            DC1_SPINES:\n              hosts:\n                DC1_SPINE1:\n                  ansible_host: 172.100.100.2\n                DC1_SPINE2:\n                  ansible_host: 172.100.100.3\n            DC1_L3_LEAFS:\n              children:\n                DC1_LEAF1:\n                  hosts:\n                    DC1_LEAF1A:\n                      ansible_host: 172.100.100.4\n                    DC1_LEAF1B:\n                      ansible_host: 172.100.100.5\n                DC1_SVC2:\n                  hosts:\n                    DC1_SVC2A:\n                      ansible_host: 172.100.100.6\n                    DC1_SVC2B:\n                      ansible_host: 172.100.100.7\n            DC1_L2_LEAFS:\n              children:\n                DC1_L2_LEAF:\n                  hosts:\n                    DC1_L2_LEAF2A:\n                      ansible_host: 172.100.100.8\n                    DC1_L2_LEAF2B:\n                      ansible_host: 172.100.100.9\n          vars:\n            ansible_connection: httpapi # (1)!\n            ansible_httpapi_use_ssl: true # (5)!\n            ansible_httpapi_validate_certs: false # (4)!\n            ansible_user: admin # (2)!\n            ansible_password: admin\n            ansible_become: true\n            ansible_become_method: enable # (3)!\n            ansible_network_os: eos\n            ansible_httpapi_port: 443\n            ansible_python_interpreter: $(which python3)\n        DC1_NETWORK_SERVICES: # (6)!\n          children:\n            DC1_L3_LEAFS:\n            DC1_L2_LEAFS:\n\n        DC1_CONNECTED_ENDPOINTS: # (7)!\n          children:\n            DC1_L3_LEAFS:\n            DC1_L2_LEAFS:\n</code></pre> <ol> <li>Ansible host uses eAPI to connect to cEOS-Lab nodes</li> <li>Ansible username/password to connect to cEOS-Lab nodes</li> <li>How to escalate privileges to get write access</li> <li>Do not validate SSL certificates</li> <li>Use SSL</li> <li>Creates a group named <code>DC1_NETWORK_SERVICES</code> which is resolved to the group_vars file <code>group_vars/DC1_NETWORK_SERVICES.yaml</code> which contains VLANs and VRFs specifications.</li> <li>Creates a group named <code>DC1_CONNECTED_ENDPOINTS</code> which is resolved to the group_vars file <code>group_vars/DC1_CONNECTED_ENDPOINTS.yaml</code> which contains specifications of connected endpoints (servers/clients).</li> </ol> ansible.cfg <pre><code>[defaults]\nhost_key_checking = False\ninventory=./inventory.yaml\ngathering=explicit\nretry_files_enabled = False\ncollections_paths = ../ansible-cvp:../ansible-avd:~/.ansible/collections:/usr/share/ansible/collections\njinja2_extensions =  jinja2.ext.loopcontrols,jinja2.ext.do,jinja2.ext.i18n\nduplicate_dict_key=error\nstdout_callback = yaml\nbin_ansible_callbacks = True\ndeprecation_warnings=False\n\n[persistent_connection]\nconnect_timeout = 300\ncommand_timeout = 300\n</code></pre> Makefile <pre><code>.PHONY: help\nhelp: ## Display help message\n  @grep -E '^[0-9a-zA-Z_-]+\\.*[0-9a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = \":.*?## \"}; {printf \"\\033[36m%-30s\\033[0m %s\\n\", $$1, $$2}'\n\n.PHONY: deploy # (1)!\ndeploy: ## Complete AVD &amp; cEOS-Lab Deployment\n  @echo -e \"\\n############### \\e[1;30;42mStarting cEOS-Lab topology\\e[0m ###############\\n\"\n  @sudo containerlab deploy -t topology.yaml\n  @echo -e \"\\n############### \\e[1;30;42mGenerating and deploying switch configuration\\e[0m ###############\\n\"\n  @ansible-playbook playbooks/fabric-deploy-config.yaml --flush-cache\n  @echo -e \"\\n############### \\e[1;30;42mConfiguring client nodes\\e[0m ###############\\n\"\n  @bash host_l3_config/l3_build.sh\n  @echo -e \"\\n############### \\e[1;30;42mcEOS-Lab Topology\\e[0m ###############\\n\"\n  @sudo containerlab inspect -t topology.yaml\n  @echo -e \"\\n############### \\e[1;30;42mcEOS-Lab Deployment Complete\\e[0m ###############\\n\"\n\n.PHONY: destroy # (2)!\ndestroy: ## Delete cEOS-Lab Deployment and AVD generated config and documentation\n  @echo -e \"\\n############### \\e[1;30;42mWiping nodes and deleting AVD configuration\\e[0m ###############\\n\"\n  @sudo containerlab destroy -t topology.yaml --cleanup\n  @rm -rf .topology.yaml.bak config_backup/ snapshots/ reports/ documentation/ intended/\n</code></pre> <ol> <li><code>make deploy</code>: Starts the containerlab topology, builds and deploys configuration using AVD and configures clients/servers.</li> <li><code>make destroy</code>: Delete the lab and wipe all the AVD-generated configurations and artifacts.</li> </ol> host_l3_config/l3_build.sh <p>Configures bond interface and assigns IP, and default gateway on the alpine-host clients.</p> <pre><code>#!/bin/bash\n\nCMD1='cat /etc/hostname; \\\nsudo vconfig add team0 110; \\\nsudo ifconfig team0.110 10.1.10.101 netmask 255.255.255.0;\\\nsudo ip link set up team0.110; \\\nsudo ip route add 10.1.0.0/16 via 10.1.10.1 dev team0.110; \\\nsudo ifconfig team0.110; \\\nsudo route -n\n'\n\nCMD2='cat /etc/hostname; \\\nsudo vconfig add team0 111; \\\nsudo ifconfig team0.111 10.1.11.102 netmask 255.255.255.0; \\\nsudo ip link set up team0.111; \\\nsudo ip route add 10.1.0.0/16 via 10.1.11.1 dev team0.111; \\\nsudo ifconfig team0.111; \\\nsudo route -n'\n\nCMD3='cat /etc/hostname; \\\nsudo vconfig add team0 112; \\\nsudo ifconfig team0.112 10.1.12.103 netmask 255.255.255.0; \\\nsudo ip link set up team0.112; \\\nsudo ip route add 10.1.0.0/16 via 10.1.12.1 dev team0.112; \\\nsudo ifconfig team0.112; \\\nsudo route -n\n'\n\nCMD4='cat /etc/hostname; \\\nsudo vconfig add team0 113; \\\nsudo ifconfig team0.113 10.1.13.104 netmask 255.255.255.0; \\\nsudo ip link set up team0.113; \\\nsudo ip route add 10.1.0.0/16 via 10.1.13.1 dev team0.113; \\\nsudo ifconfig team0.113; \\\nsudo route -n'\n\necho \"[INFO] Configuring clab-avdirb-client1\"\ndocker exec -it  clab-avdirb-client1 /bin/sh -c \"$CMD1\"\n\necho \"[INFO] Configuring clab-avdirb-client2\"\ndocker exec -it  clab-avdirb-client2 /bin/sh -c \"$CMD2\"\n\necho \"[INFO] Configuring clab-avdirb-client3\"\ndocker exec -it  clab-avdirb-client3 /bin/sh -c \"$CMD3\"\n\necho \"[INFO] Configuring clab-avdirb-client4\"\ndocker exec -it  clab-avdirb-client4 /bin/sh -c \"$CMD4\"\n\necho \"[INFO] Completed\"\n\necho \"Use [ docker exec -it clab-avdirb-client&lt;x&gt; /bin/sh ] to login in host.\"\n</code></pre> playbooks/fabric-deploy-config.yaml <pre><code>- name: Build cEOS EVPN Symmetric IRB Fabric (eBGP Overlay and eBGP Underlay)\n  hosts: DC1_FABRIC\n  tasks:\n    - name: Generate EOS configuration Snapshots\n      tags: [snapshot]\n      import_role:\n        name: arista.avd.eos_snapshot # (1)!\n\n    - name: Generate AVD Structured Configurations and Fabric Documentation\n      import_role:\n        name: arista.avd.eos_designs # (2)!\n\n    - name: Generate Switch Intended Configurations and Documentation\n      import_role:\n        name: arista.avd.eos_cli_config_gen # (3)!\n\n    - name: Deploy generated configuration to devices\n      tags: [deploy]\n      import_role:\n        name: arista.avd.eos_config_deploy_eapi # (4)!\n\n    - name: Validate states on EOS devices\n      tags: [verify, never]\n      import_role:\n        name: arista.avd.eos_validate_state # (5)!\n</code></pre> <ol> <li>This task uses the role <code>arista.avd.eos_snapshot</code>, which is used to collect commands on Arista EOS devices and generate a report which is found in the <code>snapshots</code> folder.</li> <li>This task uses the role <code>arista.avd.eos_designs</code>, which generates structured configuration for each device. This structured configuration can be found in the <code>intended/structured_configs</code> folder.</li> <li>This task uses the role <code>arista.avd.eos_cli_config_gen</code>, which generates the Arista EOS CLI configurations found in the <code>intended/configs</code> folder, along with the device-specific and fabric wide documentation found in the <code>documentation</code> folder. It relies on the structured configuration generated by <code>arista.avd.eos_designs</code>.</li> <li>This task uses the <code>arista.avd.eos_config_deploy_eapi</code> role to deploy the configurations directly to EOS nodes that were generated by the <code>arista.avd.eos_cli_config_gen</code> role.</li> <li>This task uses the <code>arista.avd.eos_validate_state</code> role to validate the EOS operational state. This is done by comparing the structured configuration generated by <code>arista.avd.eos_designs</code> and operational states (actual state) from EOS device and generating a report stored under <code>reports</code> folder.</li> </ol> group_vars AVD_LAB.yamlDC1_FABRIC.yamlDC1_NETWORK_SERVICES.yamlDC1_CONNECTED_ENDPOINTS.yamlDC1_L2_LEAFS.yamlDC1_L3_LEAFS.yamlDC1_SPINES.yaml <pre><code>---\nlocal_users: # (1)!\n  - name: admin\n    privilege: 15\n    role: network-admin\n    sha512_password: \"$6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\"\n\nname_servers: # (2)!\n  - 1.1.1.1\n  - 8.8.8.8\n\nntp: # (3)!\n  servers:\n  - name: time.google.com\n    preferred: true\n    vrf: MGMT\n    iburst: true\n\nservice_routing_protocols_model: multi-agent # (4)!\n\ncustom_structured_configuration_spanning_tree: # (5)!\n  mode: mstp\n\nip_routing: true # (6)!\n\n# hardcoding management0 for cEOS lab compatibility (default: Management1)\nmgmt_interface: Management0 # (7)!\nmgmt_gateway: 172.100.100.1\nmgmt_interface_vrf: MGMT\n\n# Management eAPI | Required for this Lab\ncustom_structured_configuration_management_api_http:\n  https_ssl_profile: eAPI\n\n# Management security required for SSL profile with strong ciphers\ncustom_structured_configuration_management_security: # (8)!\n  ssl_profiles:\n    - name: eAPI\n      certificate:\n        file: eAPI.crt\n        key: eAPI.key\n      cipher_list: 'HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL'\n</code></pre> <ol> <li>Local user/password set to ansible user <code>admin</code> with password <code>admin</code> </li> <li>DNS servers</li> <li>NTP servers</li> <li>Multi-agent routing protocol model required for EVPN</li> <li>STP</li> <li>IP routing enabled</li> <li>Management settings such as interface name, gateway and OOB VRF</li> <li>SSL profile for eAPI</li> </ol> <pre><code>---\nfabric_name: DC1_FABRIC # (1)!\n\nunderlay_routing_protocol: ebgp # (2)!\n\noverlay_routing_protocol: ebgp\n\nevpn_vlan_aware_bundles: true # (3)!\n\n# bgp peer groups passwords\nbgp_peer_groups: # (4)!\n  ipv4_underlay_peers:\n    password: \"AQQvKeimxJu+uGQ/yYvv9w==\"\n  evpn_overlay_peers:\n      password: \"q+VNViP5i4rVjW1cxFv2wA==\"\n  mlag_ipv4_underlay_peer:\n      password: \"vnEaG8gMeQf3d3cN6PktXQ==\"\n\n# BGP defaults\nbgp_default_ipv4_unicast: false # (5)!\nbgp_update_wait_install: false\nbgp_update_wait_for_convergence: false\nbgp_distance:\n  external_routes: 20\n  internal_routes: 200\n  local_routes: 200\n\nspine:\n  defaults:\n    platform: cEOS-LAB\n    bgp_as: '65001'\n    loopback_ipv4_pool: 192.168.255.0/24 # (6)!\n  nodes: # (7)!\n    - name: DC1_SPINE1\n      id: 1 # (8)!\n      mgmt_ip: 172.100.100.2/24\n    - name: DC1_SPINE2\n      id: 2\n      mgmt_ip: 172.100.100.3/24\n\nl3leaf:\n  defaults:\n    platform: cEOS-LAB\n    bgp_as: '65100'\n    uplink_switches: # (9)!\n      - DC1_SPINE1\n      - DC1_SPINE2\n    uplink_interfaces: # (10)!\n      - Ethernet1\n      - Ethernet2\n    mlag_interfaces: # (11)!\n      - Ethernet3\n      - Ethernet4\n    virtual_router_mac_address: 00:00:00:00:00:01 # (12)!\n    spanning_tree_mode: mstp # (13)!\n    spanning_tree_priority: 4096 # (14)!\n    loopback_ipv4_pool: 192.168.255.0/24 # (15)!\n    loopback_ipv4_offset: 2 # (16)!\n    vtep_loopback_ipv4_pool: 192.168.254.0/24 # (17)!\n    uplink_ipv4_pool: 172.31.255.0/24 # (18)!\n    mlag_peer_ipv4_pool: 10.255.252.0/24 # (19)!\n    mlag_peer_l3_ipv4_pool: 10.255.251.0/24 # (20)!\n  node_groups: # (21)!\n    - group: DC1_LEAF1\n      bgp_as: '65101'\n      filter:\n        tenants:\n          - Tenant_A\n        tags:\n          - opzone_pod1\n      nodes:\n        - name: DC1_LEAF1A\n          id: 1\n          mgmt_ip: 172.100.100.4/24\n          uplink_switch_interfaces: # (22)!\n            - Ethernet1\n            - Ethernet1\n        - name: DC1_LEAF1B\n          id: 2\n          mgmt_ip: 172.100.100.5/24\n          uplink_switch_interfaces:\n            - Ethernet2\n            - Ethernet2\n    - group: DC1_SVC2\n      bgp_as: '65102'\n      filter:\n        tenants:\n          - Tenant_A\n        tags:\n          - opzone_pod2\n      nodes:\n        - name: DC1_SVC2A\n          id: 3\n          mgmt_ip: 172.100.100.6/24\n          uplink_switch_interfaces:\n            - Ethernet3\n            - Ethernet3\n        - name: DC1_SVC2B\n          id: 4\n          mgmt_ip: 172.100.100.7/24\n          uplink_switch_interfaces:\n            - Ethernet4\n            - Ethernet4\n\nl2leaf:\n  defaults:\n    platform: cEOS-LAB\n    uplink_switches:\n      - DC1_SVC2A\n      - DC1_SVC2B\n    uplink_interfaces:\n      - Ethernet1\n      - Ethernet2\n    mlag_interfaces:\n      - Ethernet3\n      - Ethernet4\n    spanning_tree_mode: mstp\n    spanning_tree_priority: 16384\n    mlag_peer_ipv4_pool: 10.255.252.0/24\n    mlag_peer_l3_ipv4_pool: 10.255.251.0/24\n  node_groups:\n    - group: DC1_L2_LEAF\n      nodes:\n        - name: DC1_L2_LEAF2A\n          id: 5\n          mgmt_ip: 172.100.100.8/24\n          uplink_switch_interfaces:\n            - Ethernet5\n            - Ethernet5\n        - name: DC1_L2_LEAF2B\n          id: 6\n          mgmt_ip: 172.100.100.9/24\n          uplink_switch_interfaces:\n            - Ethernet6\n            - Ethernet6\n</code></pre> <ol> <li>The name of the fabric for internal AVD use. This name must match the name of an Ansible Group (and therefore a corresponding group_vars file) covering all network devices.</li> <li>Routing protocols to use in the underlay and overlay</li> <li>Use EVPN VLAN aware bundles</li> <li>Underlay and overlay BGP peer groups and their passwords</li> <li>BGP defaults</li> <li><code>loopback_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for Loopback0.</li> <li><code>nodes</code> defines the actual spine switches, using the hostnames defined in the inventory.</li> <li><code>id</code> is used to calculate the various IP addresses, for example, the IPv4 address for the Loopback0 interface. In this case, <code>DC1_SPINE1</code> will get the IPv4 address 192.168.255.1 assigned to the Loopback0 interface.</li> <li><code>uplink_switches</code> defines the uplink switches, which are <code>DC1_SPINE1</code> and <code>DC1_SPINE2</code>. Note that the <code>uplink_interfaces</code> and <code>uplink_switches</code> are paired vertically.</li> <li><code>uplink_interfaces</code> is used by the <code>l3leaf</code> nodes to connect to the spine switches.</li> <li><code>mlag_interfaces</code> defines the MLAG interfaces used on each leaf switch.</li> <li><code>virtual_router_mac_address</code> defines the MAC address used for the anycast gateway on the various subnets. This is the MAC address connected endpoints will learn when ARPing for their default gateway.</li> <li>STP mode which is here set to MSTP, which is the default. We can set it to other available modes based on requirements.</li> <li><code>spanning_tree_priority</code> sets the STP priority. Since STP in an L3LS network is effectively only running locally on the switch, the same priority across all L3 leaf switches can be re-used.</li> <li><code>loopback_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for Loopback0. Please note that this IP pool is identical to the one used for the spine switches in this example. To avoid setting the same IP addresses for several devices, we define the option <code>loopback_ipv4_offset</code>.</li> <li><code>loopback_ipv4_offset</code> offsets all assigned loopback IP addresses counting from the beginning of the IP scope. This is required to avoid overlapping IPs when the same IP pool is used for two different node_types (like <code>spine</code> and <code>l3leaf</code> in this example). The offset is \u201c2\u201d because each spine switch uses one loopback address.</li> <li><code>vtep_loopback_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for the VTEP (Loopback1).</li> <li><code>uplink_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for the uplink interfaces.</li> <li><code>mlag_peer_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for the MLAG peer-link interface <code>VLAN4094</code>.</li> <li><code>mlag_peer_l3_ipv4_pool</code> defines the IP scope from which AVD assigns IPv4 addresses for the iBGP peering established between the two leaf switches via the SVI/IRB interface <code>VLAN4093</code>.</li> <li><code>node_groups</code> defines settings common to more than one node. For example, when exactly two nodes are part of a node group for leaf switches, AVD will, by default, automatically generate MLAG configuration.</li> <li><code>uplink_switch_interfaces</code> defines the interfaces used on the uplink switches (Ethernet1 on DC1_SPINE1 and DC1_SPINE2 in this example).</li> <li></li> </ol> <pre><code>---\ntenants: # (1)!\n  # Tenant A VRFs / VLANs\n  - name: Tenant_A\n    mac_vrf_vni_base: 10000 # (2)!\n    vrfs: # (3)!\n      - name: Tenant_A_OP_Zone\n        vrf_vni: 10 # (4)!\n        vtep_diagnostic: # (5)!\n          loopback: 100\n          loopback_ip_range: 10.255.1.0/24\n        svis: # (6)!\n          - id: 110\n            name: Tenant_A_OP_Zone_1\n            tags: # (8)!\n              - opzone_pod1\n            enabled: true\n            ip_address_virtual: 10.1.10.1/24 # (7)!\n          - id: 111\n            name: Tenant_A_OP_Zone_2\n            tags:\n              - opzone_pod1\n            enabled: true\n            ip_address_virtual: 10.1.11.1/24\n          - id: 112\n            name: Tenant_A_OP_Zone_3\n            tags:\n              - opzone_pod2\n            enabled: true\n            ip_address_virtual: 10.1.12.1/24\n          - id: 113\n            name: Tenant_A_OP_Zone_4\n            tags:\n              - opzone_pod2\n            enabled: true\n            ip_address_virtual: 10.1.13.1/24\n</code></pre> <ol> <li>An additional level of abstraction in addition to VRFs. In this example, just one tenant named <code>Tenant_A</code> is specified.</li> <li>The base number (<code>10000</code>) is used to generate the L2VNI numbers automatically, <code>L2VNI = base number + VLAN-id</code>. For example, L2VNI for VLAN11 = 10000 + 11 = 10011.</li> <li>VRF definitions inside the tenant</li> <li>VRF VNI definition</li> <li>Enable VTEP Network diagnostics. This will create a loopback with virtual source-nat to enable to perform diagnostics from the switch</li> <li>SVI definitions for all SVIs in this tenant</li> <li>IP anycast gateway to be used in the SVI in every leaf across the fabric.</li> <li>Tags leveraged for network services filtering. Here <code>opzone_pod1</code> is applied to <code>DC1_LEAF1</code> node group and <code>opzone_pod2</code> is applied to <code>DC1_SVC2</code> node group.</li> </ol> <pre><code>---\nport_profiles: # (1)!\n  - profile: Tenant_A_pod1_clientA\n    mode: trunk\n    vlans: '110'\n  - profile: Tenant_A_pod1_clientB\n    mode: trunk\n    vlans: '111'\n  - profile: Tenant_A_pod2_clientA\n    mode: trunk\n    vlans: '112'\n  - profile: Tenant_A_pod2_clientB\n    mode: trunk\n    vlans: '113'\n\nservers:\n  - name: server01 # (3)!\n    rack: rack01 # (2)!\n    adapters:\n      - endpoint_ports: # (4)!\n          - Eth1\n          - Eth2\n        switch_ports: # (5)!\n          - Ethernet5\n          - Ethernet5\n        switches: # (6)!\n          - DC1_LEAF1A\n          - DC1_LEAF1B\n        profile: Tenant_A_pod1_clientA # (7)!\n        spanning_tree_portfast: edge # (8)!\n        port_channel: # (9)!\n          description: PortChannel5\n          mode: active\n  - name: server02\n    rack: rack01\n    adapters:\n      - endpoint_ports:\n          - Eth1\n          - Eth2\n        switch_ports:\n          - Ethernet6\n          - Ethernet6\n        switches:\n          - DC1_LEAF1A\n          - DC1_LEAF1B\n        profile: Tenant_A_pod1_clientB\n        spanning_tree_portfast: edge\n        port_channel:\n          description: PortChannel6\n          mode: active\n  - name: server03\n    rack: rack02\n    adapters:\n      - endpoint_ports:\n          - Eth1\n          - Eth2\n        switch_ports:\n          - Ethernet5\n          - Ethernet5\n        switches:\n          - DC1_L2_LEAF2A\n          - DC1_L2_LEAF2B\n        profile: Tenant_A_pod2_clientA\n        spanning_tree_portfast: edge\n        port_channel:\n          description: PortChannel5\n          mode: active\n  - name: server04\n    rack: rack02\n    adapters:\n      - endpoint_ports:\n          - Eth1\n          - Eth2\n        switch_ports:\n          - Ethernet6\n          - Ethernet6\n        switches:\n          - DC1_L2_LEAF2A\n          - DC1_L2_LEAF2B\n        profile: Tenant_A_pod2_clientB\n        spanning_tree_portfast: edge\n        port_channel:\n          description: PortChannel6\n          mode: active\n</code></pre> <ol> <li>Optional profiles to share common settings for <code>connected_endpoints</code> and/or network_ports.</li> <li>Rack is used for documentation purposes only.</li> <li>The endpoint name will be used in the switch port description.</li> <li><code>endpoint_ports</code> are defined for use in the interface descriptions on the switch. This does not configure anything on the server.</li> <li><code>switch_ports</code> defines the interfaces used in the switches. In this example, the server is dual-connected to Ethernet5 and Ethernet5. These two ports exist on switch DC1_LEAF1A and DC1_LEAF1B defined in the following line.</li> <li><code>switches</code> defines the switches used, in this case DC1_LEAF1A and DC1_LEAF1B. Note that the <code>endpoint_ports</code>, <code>switch_ports</code> and <code>switches</code> definitions are paired vertically.</li> <li><code>profile</code> applies the profile configuration defined earlier in <code>port_profiles</code>.</li> <li><code>spanning_tree_portfast</code> defines whether the switch port should be a spanning tree edge or network port.</li> <li><code>port_channel</code> defines the description and mode for the port-channel.</li> </ol> <pre><code>---\ntype: l2leaf\n</code></pre> <pre><code>---\ntype: l3leaf\n</code></pre> <pre><code>---\ntype: spine\n</code></pre>"},{"location":"quickStart/#deploying-the-lab","title":"Deploying the lab","text":"<ul> <li>Using <code>containerlab deploy</code> command we will deploy the cEOS-lab containers.</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Within a few moments, a summary of the deployed nodes will become visible</li> </ul> Reveal Output <pre><code>+----+----------------------+--------------+-------------------+-------+---------+-------------------+------------------------+\n| #  |         Name         | Container ID |       Image       | Kind  |  State  |   IPv4 Address    |      IPv6 Address      |\n+----+----------------------+--------------+-------------------+-------+---------+-------------------+------------------------+\n|  1 | clab-avdirb-client1  | 4d58d9fa2b7f | alpine-host       | linux | running | 172.100.100.10/24 | 2001:172:100:100::6/80 |\n|  2 | clab-avdirb-client2  | 8ab20c4d5bf8 | alpine-host       | linux | running | 172.100.100.11/24 | 2001:172:100:100::c/80 |\n|  3 | clab-avdirb-client3  | a26e8eecb6a4 | alpine-host       | linux | running | 172.100.100.12/24 | 2001:172:100:100::d/80 |\n|  4 | clab-avdirb-client4  | 384c133d3529 | alpine-host       | linux | running | 172.100.100.13/24 | 2001:172:100:100::a/80 |\n|  5 | clab-avdirb-l2leaf2a | 1f8572980b65 | ceosimage:4.30.1F | ceos  | running | 172.100.100.8/24  | 2001:172:100:100::3/80 |\n|  6 | clab-avdirb-l2leaf2b | b0451a085cea | ceosimage:4.30.1F | ceos  | running | 172.100.100.9/24  | 2001:172:100:100::8/80 |\n|  7 | clab-avdirb-leaf1a   | 7cfa319eddbb | ceosimage:4.30.1F | ceos  | running | 172.100.100.4/24  | 2001:172:100:100::4/80 |\n|  8 | clab-avdirb-leaf1b   | 0166c63d984f | ceosimage:4.30.1F | ceos  | running | 172.100.100.5/24  | 2001:172:100:100::9/80 |\n|  9 | clab-avdirb-spine1   | 72729fe862d6 | ceosimage:4.30.1F | ceos  | running | 172.100.100.2/24  | 2001:172:100:100::7/80 |\n| 10 | clab-avdirb-spine2   | dbbc44639d2b | ceosimage:4.30.1F | ceos  | running | 172.100.100.3/24  | 2001:172:100:100::2/80 |\n| 11 | clab-avdirb-svc2a    | b9874dbbdb33 | ceosimage:4.30.1F | ceos  | running | 172.100.100.6/24  | 2001:172:100:100::b/80 |\n| 12 | clab-avdirb-svc2b    | 9677f445be09 | ceosimage:4.30.1F | ceos  | running | 172.100.100.7/24  | 2001:172:100:100::5/80 |\n+----+----------------------+--------------+-------------------+-------+---------+-------------------+------------------------+\n</code></pre> <p>Tip</p> <p>The above lab summary can also be viewed using the following command</p> <pre><code>sudo containerlab inspect -t topology.yaml\n</code></pre> <ul> <li>Login to the cEOS-lab switch, observe it has been configured with a baseline configuration using the template file <code>avd-cEOS-Lab/ceos_lab_template/ceos.cfg.tpl</code></li> </ul> SSHdocker exec <pre><code>ssh admin@172.100.100.2\n</code></pre> <pre><code>docker exec -it clab-avdirb-spine1 Cli\n</code></pre> Reveal Output <pre><code>$ ssh admin@172.100.100.2\nPassword:\nLast login: Tue Dec  5 05:46:50 2023 from 172.100.100.1\nspine1&gt;\nspine1&gt;show version\nArista cEOSLab\nHardware version:\nSerial number: 62A5E80889120C7C6E3742392A42D0BF\nHardware MAC address: 001c.735c.a7f6\nSystem MAC address: 001c.735c.a7f6\n\nSoftware image version: 4.30.1F-32308478.4301F (engineering build)\nArchitecture: x86_64\nInternal build version: 4.30.1F-32308478.4301F\nInternal build ID: 43258559-02df-4fe8-9912-d332778f86da\nImage format version: 1.0\nImage optimization: None\n\ncEOS tools version: (unknown)\nKernel version: 3.10.0-1160.11.1.el7.x86_64\n\nUptime: 7 minutes\nTotal memory: 32397092 kB\nFree memory: 18339616 kB\n\nspine1&gt;\nspine1&gt;show lldp neighbors | include Et\nEt1           leaf1a                   Ethernet1           120\nEt2           leaf1b                   Ethernet1           120\nEt3           svc2a                    Ethernet1           120\nEt4           svc2b                    Ethernet1           120\nspine1&gt;\nspine1&gt;enable\nspine1#\nspine1#show running-config | no-more\n! Command: show running-config\n! device: spine1 (cEOSLab, EOS-4.30.1F-32308478.4301F (engineering build))\n!\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$YK6LeKfDw8AMfeWp$uFpXW6TJDrub346aAowxilc6UXvEQnXWrEbA.gLfe33Dp0rwZzWC/3I1AidW8kaxg.rPmJo7GnwsZWXsfliCW0\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname spine1\n!\nspanning-tree mode mstp\n!\nsystem l1\n   unsupported speed action error\n   unsupported error-correction action error\n!\nvrf instance MGMT\n!\nmanagement api http-commands\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\ninterface Ethernet1\n!\ninterface Ethernet2\n!\ninterface Ethernet3\n!\ninterface Ethernet4\n!\ninterface Management0\n   description oob_management\n   vrf MGMT\n   ip address 172.100.100.2/24\n   ipv6 address 2001:172:100:100::3/80\n!\nno ip routing\nno ip routing vrf MGMT\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nipv6 route vrf MGMT ::/0 2001:172:100:100::1\n!\n</code></pre>"},{"location":"quickStart/#deploying-the-configuration","title":"Deploying the configuration","text":"<ul> <li>To build and deploy the configuration to the switches using eAPI, run the playbook <code>playbooks/fabric-deploy-config.yaml</code></li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Once the playbook run is completed, based on the first task which uses <code>arista.avd.eos_snapshot</code> we can see the snapshots under the <code>snapshots</code> folder.</li> </ul> Reveal Output snapshots/ <pre><code>snapshots/\n\u251c\u2500\u2500 DC1_L2_LEAF2A\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_L2_LEAF2B\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_LEAF1A\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_LEAF1B\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_SPINE1\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_SPINE2\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u251c\u2500\u2500 DC1_SVC2A\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 report.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 show\\ running-config.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 show\\ version.txt\n\u2514\u2500\u2500 DC1_SVC2B\n    \u251c\u2500\u2500 report.md\n    \u251c\u2500\u2500 show\\ interfaces\\ description.txt\n    \u251c\u2500\u2500 show\\ ip\\ interface\\ brief.txt\n    \u251c\u2500\u2500 show\\ lldp\\ neighbors.txt\n    \u251c\u2500\u2500 show\\ running-config.txt\n    \u2514\u2500\u2500 show\\ version.txt\n</code></pre> <ul> <li>From the second task in the playbook which uses <code>arista.avd.eos_designs</code> we can see the structured YAML configuration per node is generated under <code>intended/structured_configs</code> directory.</li> </ul> Reveal Output DC1_SPINE1.ymlDC1_SPINE2.ymlDC1_LEAF1A.ymlDC1_LEAF1B.ymlDC1_SVC2A.ymlDC1_SVC2B.yamlDC1_L2_LEAF2A.yamlDC1_L2_LEAF2B.yaml <pre><code>hostname: DC1_SPINE1\nrouter_bgp:\n  as: '65001'\n  router_id: 192.168.255.1\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n    next_hop_unchanged: true\n  address_family_ipv4:\n    peer_groups:\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  neighbors:\n  - ip_address: 172.31.255.1\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65101'\n    description: DC1_LEAF1A_Ethernet1\n  - ip_address: 172.31.255.5\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65101'\n    description: DC1_LEAF1B_Ethernet1\n  - ip_address: 172.31.255.9\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65102'\n    description: DC1_SVC2A_Ethernet1\n  - ip_address: 172.31.255.13\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65102'\n    description: DC1_SVC2B_Ethernet1\n  - ip_address: 192.168.255.3\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_LEAF1A\n    remote_as: '65101'\n  - ip_address: 192.168.255.4\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_LEAF1B\n    remote_as: '65101'\n  - ip_address: 192.168.255.5\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SVC2A\n    remote_as: '65102'\n  - ip_address: 192.168.255.6\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SVC2B\n    remote_as: '65102'\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.2/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nethernet_interfaces:\n- name: Ethernet1\n  peer: DC1_LEAF1A\n  peer_interface: Ethernet1\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_LEAF1A_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.0/31\n- name: Ethernet2\n  peer: DC1_LEAF1B\n  peer_interface: Ethernet1\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_LEAF1B_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.4/31\n- name: Ethernet3\n  peer: DC1_SVC2A\n  peer_interface: Ethernet1\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_SVC2A_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.8/31\n- name: Ethernet4\n  peer: DC1_SVC2B\n  peer_interface: Ethernet1\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_SVC2B_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.12/31\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.1/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\nroute_maps:\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_SPINE2\nrouter_bgp:\n  as: '65001'\n  router_id: 192.168.255.2\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n    next_hop_unchanged: true\n  address_family_ipv4:\n    peer_groups:\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  neighbors:\n  - ip_address: 172.31.255.3\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65101'\n    description: DC1_LEAF1A_Ethernet2\n  - ip_address: 172.31.255.7\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65101'\n    description: DC1_LEAF1B_Ethernet2\n  - ip_address: 172.31.255.11\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65102'\n    description: DC1_SVC2A_Ethernet2\n  - ip_address: 172.31.255.15\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65102'\n    description: DC1_SVC2B_Ethernet2\n  - ip_address: 192.168.255.3\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_LEAF1A\n    remote_as: '65101'\n  - ip_address: 192.168.255.4\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_LEAF1B\n    remote_as: '65101'\n  - ip_address: 192.168.255.5\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SVC2A\n    remote_as: '65102'\n  - ip_address: 192.168.255.6\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SVC2B\n    remote_as: '65102'\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.3/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nethernet_interfaces:\n- name: Ethernet1\n  peer: DC1_LEAF1A\n  peer_interface: Ethernet2\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_LEAF1A_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.2/31\n- name: Ethernet2\n  peer: DC1_LEAF1B\n  peer_interface: Ethernet2\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_LEAF1B_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.6/31\n- name: Ethernet3\n  peer: DC1_SVC2A\n  peer_interface: Ethernet2\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_SVC2A_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.10/31\n- name: Ethernet4\n  peer: DC1_SVC2B\n  peer_interface: Ethernet2\n  peer_type: l3leaf\n  description: P2P_LINK_TO_DC1_SVC2B_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.14/31\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.2/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\nroute_maps:\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_LEAF1A\nrouter_bgp:\n  as: '65101'\n  router_id: 192.168.255.3\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: MLAG-IPv4-UNDERLAY-PEER\n    type: ipv4\n    remote_as: '65101'\n    next_hop_self: true\n    description: DC1_LEAF1B\n    password: vnEaG8gMeQf3d3cN6PktXQ==\n    maximum_routes: 12000\n    send_community: all\n    route_map_in: RM-MLAG-PEER-IN\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n  address_family_ipv4:\n    peer_groups:\n    - name: MLAG-IPv4-UNDERLAY-PEER\n      activate: true\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  neighbors:\n  - ip_address: 10.255.251.1\n    peer_group: MLAG-IPv4-UNDERLAY-PEER\n    description: DC1_LEAF1B\n  - ip_address: 172.31.255.0\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE1_Ethernet1\n  - ip_address: 172.31.255.2\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE2_Ethernet1\n  - ip_address: 192.168.255.1\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE1\n    remote_as: '65001'\n  - ip_address: 192.168.255.2\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE2\n    remote_as: '65001'\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\n  vrfs:\n  - name: Tenant_A_OP_Zone\n    router_id: 192.168.255.3\n    rd: 192.168.255.3:10\n    route_targets:\n      import:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n      export:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n    redistribute_routes:\n    - source_protocol: connected\n    neighbors:\n    - ip_address: 10.255.251.1\n      peer_group: MLAG-IPv4-UNDERLAY-PEER\n  vlan_aware_bundles:\n  - name: Tenant_A_OP_Zone\n    rd: 192.168.255.3:10\n    route_targets:\n      both:\n      - '10:10'\n    redistribute_routes:\n    - learned\n    vlan: 110-111\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 4096\n  no_spanning_tree_vlan: 4093-4094\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\n- name: Tenant_A_OP_Zone\n  tenant: Tenant_A\n  ip_routing: true\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.4/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4093\n  tenant: system\n  name: LEAF_PEER_L3\n  trunk_groups:\n  - LEAF_PEER_L3\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 110\n  name: Tenant_A_OP_Zone_1\n  tenant: Tenant_A\n- id: 111\n  name: Tenant_A_OP_Zone_2\n  tenant: Tenant_A\n- id: 3009\n  name: MLAG_iBGP_Tenant_A_OP_Zone\n  trunk_groups:\n  - LEAF_PEER_L3\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4093\n  description: MLAG_PEER_L3_PEERING\n  shutdown: false\n  mtu: 9214\n  ip_address: 10.255.251.0/31\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.0/31\n  no_autostate: true\n  mtu: 9214\n- name: Vlan110\n  tenant: Tenant_A\n  tags:\n  - opzone_pod1\n  description: Tenant_A_OP_Zone_1\n  shutdown: false\n  ip_address_virtual: 10.1.10.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan111\n  tenant: Tenant_A\n  tags:\n  - opzone_pod1\n  description: Tenant_A_OP_Zone_2\n  shutdown: false\n  ip_address_virtual: 10.1.11.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan3009\n  tenant: Tenant_A\n  type: underlay_peering\n  shutdown: false\n  description: 'MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone'\n  vrf: Tenant_A_OP_Zone\n  mtu: 9214\n  ip_address: 10.255.251.0/31\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_LEAF1B_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - LEAF_PEER_L3\n  - MLAG\n- name: Port-Channel5\n  description: server01_PortChannel5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '110'\n  spanning_tree_portfast: edge\n  mlag: 5\n- name: Port-Channel6\n  description: server02_PortChannel6\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '111'\n  spanning_tree_portfast: edge\n  mlag: 6\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_LEAF1B\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_LEAF1B_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_LEAF1B\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_LEAF1B_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SPINE1\n  peer_interface: Ethernet1\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE1_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.1/31\n- name: Ethernet2\n  peer: DC1_SPINE2\n  peer_interface: Ethernet1\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE2_Ethernet1\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.3/31\n- name: Ethernet5\n  peer: server01\n  peer_interface: Eth1\n  peer_type: server\n  port_profile: Tenant_A_pod1_clientA\n  description: server01_Eth1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: server02\n  peer_interface: Eth1\n  peer_type: server\n  port_profile: Tenant_A_pod1_clientB\n  description: server02_Eth1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 6\n    mode: active\nmlag_configuration:\n  domain_id: DC1_LEAF1\n  local_interface: Vlan4094\n  peer_address: 10.255.252.1\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nroute_maps:\n- name: RM-MLAG-PEER-IN\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    set:\n    - origin incomplete\n    description: Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.3/32\n- name: Loopback1\n  description: VTEP_VXLAN_Tunnel_Source\n  shutdown: false\n  ip_address: 192.168.254.3/32\n- name: Loopback100\n  description: Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n  shutdown: false\n  vrf: Tenant_A_OP_Zone\n  ip_address: 10.255.1.3/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\n  - sequence: 20\n    action: permit 192.168.254.0/24 eq 32\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nip_igmp_snooping:\n  globally_enabled: true\nip_virtual_router_mac_address: 00:00:00:00:00:01\nvxlan_interface:\n  Vxlan1:\n    description: DC1_LEAF1A_VTEP\n    vxlan:\n      udp_port: 4789\n      source_interface: Loopback1\n      virtual_router_encapsulation_mac_address: mlag-system-id\n      vlans:\n      - id: 110\n        vni: 10110\n      - id: 111\n        vni: 10111\n      vrfs:\n      - name: Tenant_A_OP_Zone\n        vni: 10\nvirtual_source_nat_vrfs:\n- name: Tenant_A_OP_Zone\n  ip_address: 10.255.1.3\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_LEAF1B\nrouter_bgp:\n  as: '65101'\n  router_id: 192.168.255.4\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: MLAG-IPv4-UNDERLAY-PEER\n    type: ipv4\n    remote_as: '65101'\n    next_hop_self: true\n    description: DC1_LEAF1A\n    password: vnEaG8gMeQf3d3cN6PktXQ==\n    maximum_routes: 12000\n    send_community: all\n    route_map_in: RM-MLAG-PEER-IN\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n  address_family_ipv4:\n    peer_groups:\n    - name: MLAG-IPv4-UNDERLAY-PEER\n      activate: true\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  neighbors:\n  - ip_address: 10.255.251.0\n    peer_group: MLAG-IPv4-UNDERLAY-PEER\n    description: DC1_LEAF1A\n  - ip_address: 172.31.255.4\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE1_Ethernet2\n  - ip_address: 172.31.255.6\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE2_Ethernet2\n  - ip_address: 192.168.255.1\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE1\n    remote_as: '65001'\n  - ip_address: 192.168.255.2\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE2\n    remote_as: '65001'\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\n  vrfs:\n  - name: Tenant_A_OP_Zone\n    router_id: 192.168.255.4\n    rd: 192.168.255.4:10\n    route_targets:\n      import:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n      export:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n    redistribute_routes:\n    - source_protocol: connected\n    neighbors:\n    - ip_address: 10.255.251.0\n      peer_group: MLAG-IPv4-UNDERLAY-PEER\n  vlan_aware_bundles:\n  - name: Tenant_A_OP_Zone\n    rd: 192.168.255.4:10\n    route_targets:\n      both:\n      - '10:10'\n    redistribute_routes:\n    - learned\n    vlan: 110-111\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 4096\n  no_spanning_tree_vlan: 4093-4094\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\n- name: Tenant_A_OP_Zone\n  tenant: Tenant_A\n  ip_routing: true\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.5/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4093\n  tenant: system\n  name: LEAF_PEER_L3\n  trunk_groups:\n  - LEAF_PEER_L3\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 110\n  name: Tenant_A_OP_Zone_1\n  tenant: Tenant_A\n- id: 111\n  name: Tenant_A_OP_Zone_2\n  tenant: Tenant_A\n- id: 3009\n  name: MLAG_iBGP_Tenant_A_OP_Zone\n  trunk_groups:\n  - LEAF_PEER_L3\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4093\n  description: MLAG_PEER_L3_PEERING\n  shutdown: false\n  mtu: 9214\n  ip_address: 10.255.251.1/31\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.1/31\n  no_autostate: true\n  mtu: 9214\n- name: Vlan110\n  tenant: Tenant_A\n  tags:\n  - opzone_pod1\n  description: Tenant_A_OP_Zone_1\n  shutdown: false\n  ip_address_virtual: 10.1.10.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan111\n  tenant: Tenant_A\n  tags:\n  - opzone_pod1\n  description: Tenant_A_OP_Zone_2\n  shutdown: false\n  ip_address_virtual: 10.1.11.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan3009\n  tenant: Tenant_A\n  type: underlay_peering\n  shutdown: false\n  description: 'MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone'\n  vrf: Tenant_A_OP_Zone\n  mtu: 9214\n  ip_address: 10.255.251.1/31\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_LEAF1A_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - LEAF_PEER_L3\n  - MLAG\n- name: Port-Channel5\n  description: server01_PortChannel5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '110'\n  spanning_tree_portfast: edge\n  mlag: 5\n- name: Port-Channel6\n  description: server02_PortChannel6\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '111'\n  spanning_tree_portfast: edge\n  mlag: 6\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_LEAF1A\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_LEAF1A_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_LEAF1A\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_LEAF1A_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SPINE1\n  peer_interface: Ethernet2\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE1_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.5/31\n- name: Ethernet2\n  peer: DC1_SPINE2\n  peer_interface: Ethernet2\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE2_Ethernet2\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.7/31\n- name: Ethernet5\n  peer: server01\n  peer_interface: Eth2\n  peer_type: server\n  port_profile: Tenant_A_pod1_clientA\n  description: server01_Eth2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: server02\n  peer_interface: Eth2\n  peer_type: server\n  port_profile: Tenant_A_pod1_clientB\n  description: server02_Eth2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 6\n    mode: active\nmlag_configuration:\n  domain_id: DC1_LEAF1\n  local_interface: Vlan4094\n  peer_address: 10.255.252.0\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nroute_maps:\n- name: RM-MLAG-PEER-IN\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    set:\n    - origin incomplete\n    description: Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.4/32\n- name: Loopback1\n  description: VTEP_VXLAN_Tunnel_Source\n  shutdown: false\n  ip_address: 192.168.254.3/32\n- name: Loopback100\n  description: Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n  shutdown: false\n  vrf: Tenant_A_OP_Zone\n  ip_address: 10.255.1.4/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\n  - sequence: 20\n    action: permit 192.168.254.0/24 eq 32\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nip_igmp_snooping:\n  globally_enabled: true\nip_virtual_router_mac_address: 00:00:00:00:00:01\nvxlan_interface:\n  Vxlan1:\n    description: DC1_LEAF1B_VTEP\n    vxlan:\n      udp_port: 4789\n      source_interface: Loopback1\n      virtual_router_encapsulation_mac_address: mlag-system-id\n      vlans:\n      - id: 110\n        vni: 10110\n      - id: 111\n        vni: 10111\n      vrfs:\n      - name: Tenant_A_OP_Zone\n        vni: 10\nvirtual_source_nat_vrfs:\n- name: Tenant_A_OP_Zone\n  ip_address: 10.255.1.4\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_SVC2A\nrouter_bgp:\n  as: '65102'\n  router_id: 192.168.255.5\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: MLAG-IPv4-UNDERLAY-PEER\n    type: ipv4\n    remote_as: '65102'\n    next_hop_self: true\n    description: DC1_SVC2B\n    password: vnEaG8gMeQf3d3cN6PktXQ==\n    maximum_routes: 12000\n    send_community: all\n    route_map_in: RM-MLAG-PEER-IN\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n  address_family_ipv4:\n    peer_groups:\n    - name: MLAG-IPv4-UNDERLAY-PEER\n      activate: true\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  neighbors:\n  - ip_address: 10.255.251.5\n    peer_group: MLAG-IPv4-UNDERLAY-PEER\n    description: DC1_SVC2B\n  - ip_address: 172.31.255.8\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE1_Ethernet3\n  - ip_address: 172.31.255.10\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE2_Ethernet3\n  - ip_address: 192.168.255.1\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE1\n    remote_as: '65001'\n  - ip_address: 192.168.255.2\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE2\n    remote_as: '65001'\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\n  vrfs:\n  - name: Tenant_A_OP_Zone\n    router_id: 192.168.255.5\n    rd: 192.168.255.5:10\n    route_targets:\n      import:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n      export:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n    redistribute_routes:\n    - source_protocol: connected\n    neighbors:\n    - ip_address: 10.255.251.5\n      peer_group: MLAG-IPv4-UNDERLAY-PEER\n  vlan_aware_bundles:\n  - name: Tenant_A_OP_Zone\n    rd: 192.168.255.5:10\n    route_targets:\n      both:\n      - '10:10'\n    redistribute_routes:\n    - learned\n    vlan: 112-113\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 4096\n  no_spanning_tree_vlan: 4093-4094\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\n- name: Tenant_A_OP_Zone\n  tenant: Tenant_A\n  ip_routing: true\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.6/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4093\n  tenant: system\n  name: LEAF_PEER_L3\n  trunk_groups:\n  - LEAF_PEER_L3\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 112\n  name: Tenant_A_OP_Zone_3\n  tenant: Tenant_A\n- id: 113\n  name: Tenant_A_OP_Zone_4\n  tenant: Tenant_A\n- id: 3009\n  name: MLAG_iBGP_Tenant_A_OP_Zone\n  trunk_groups:\n  - LEAF_PEER_L3\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4093\n  description: MLAG_PEER_L3_PEERING\n  shutdown: false\n  mtu: 9214\n  ip_address: 10.255.251.4/31\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.4/31\n  no_autostate: true\n  mtu: 9214\n- name: Vlan112\n  tenant: Tenant_A\n  tags:\n  - opzone_pod2\n  description: Tenant_A_OP_Zone_3\n  shutdown: false\n  ip_address_virtual: 10.1.12.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan113\n  tenant: Tenant_A\n  tags:\n  - opzone_pod2\n  description: Tenant_A_OP_Zone_4\n  shutdown: false\n  ip_address_virtual: 10.1.13.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan3009\n  tenant: Tenant_A\n  type: underlay_peering\n  shutdown: false\n  description: 'MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone'\n  vrf: Tenant_A_OP_Zone\n  mtu: 9214\n  ip_address: 10.255.251.4/31\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_SVC2B_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - LEAF_PEER_L3\n  - MLAG\n- name: Port-Channel5\n  description: DC1_L2_LEAF_Po1\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: 112-113\n  mlag: 5\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_SVC2B\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_SVC2B_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_SVC2B\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_SVC2B_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SPINE1\n  peer_interface: Ethernet3\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE1_Ethernet3\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.9/31\n- name: Ethernet2\n  peer: DC1_SPINE2\n  peer_interface: Ethernet3\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE2_Ethernet3\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.11/31\n- name: Ethernet5\n  peer: DC1_L2_LEAF2A\n  peer_interface: Ethernet1\n  peer_type: l2leaf\n  description: DC1_L2_LEAF2A_Ethernet1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: DC1_L2_LEAF2B\n  peer_interface: Ethernet1\n  peer_type: l2leaf\n  description: DC1_L2_LEAF2B_Ethernet1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\nmlag_configuration:\n  domain_id: DC1_SVC2\n  local_interface: Vlan4094\n  peer_address: 10.255.252.5\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nroute_maps:\n- name: RM-MLAG-PEER-IN\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    set:\n    - origin incomplete\n    description: Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.5/32\n- name: Loopback1\n  description: VTEP_VXLAN_Tunnel_Source\n  shutdown: false\n  ip_address: 192.168.254.5/32\n- name: Loopback100\n  description: Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n  shutdown: false\n  vrf: Tenant_A_OP_Zone\n  ip_address: 10.255.1.5/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\n  - sequence: 20\n    action: permit 192.168.254.0/24 eq 32\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nip_igmp_snooping:\n  globally_enabled: true\nip_virtual_router_mac_address: 00:00:00:00:00:01\nvxlan_interface:\n  Vxlan1:\n    description: DC1_SVC2A_VTEP\n    vxlan:\n      udp_port: 4789\n      source_interface: Loopback1\n      virtual_router_encapsulation_mac_address: mlag-system-id\n      vlans:\n      - id: 112\n        vni: 10112\n      - id: 113\n        vni: 10113\n      vrfs:\n      - name: Tenant_A_OP_Zone\n        vni: 10\nvirtual_source_nat_vrfs:\n- name: Tenant_A_OP_Zone\n  ip_address: 10.255.1.5\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_SVC2B\nrouter_bgp:\n  as: '65102'\n  router_id: 192.168.255.6\n  distance:\n    external_routes: 20\n    internal_routes: 200\n    local_routes: 200\n  bgp:\n    default:\n      ipv4_unicast: false\n  maximum_paths:\n    paths: 4\n    ecmp: 4\n  peer_groups:\n  - name: MLAG-IPv4-UNDERLAY-PEER\n    type: ipv4\n    remote_as: '65102'\n    next_hop_self: true\n    description: DC1_SVC2A\n    password: vnEaG8gMeQf3d3cN6PktXQ==\n    maximum_routes: 12000\n    send_community: all\n    route_map_in: RM-MLAG-PEER-IN\n  - name: IPv4-UNDERLAY-PEERS\n    type: ipv4\n    password: AQQvKeimxJu+uGQ/yYvv9w==\n    maximum_routes: 12000\n    send_community: all\n  - name: EVPN-OVERLAY-PEERS\n    type: evpn\n    update_source: Loopback0\n    bfd: true\n    password: q+VNViP5i4rVjW1cxFv2wA==\n    send_community: all\n    maximum_routes: 0\n    ebgp_multihop: 3\n  address_family_ipv4:\n    peer_groups:\n    - name: MLAG-IPv4-UNDERLAY-PEER\n      activate: true\n    - name: IPv4-UNDERLAY-PEERS\n      activate: true\n    - name: EVPN-OVERLAY-PEERS\n      activate: false\n  neighbors:\n  - ip_address: 10.255.251.4\n    peer_group: MLAG-IPv4-UNDERLAY-PEER\n    description: DC1_SVC2A\n  - ip_address: 172.31.255.12\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE1_Ethernet4\n  - ip_address: 172.31.255.14\n    peer_group: IPv4-UNDERLAY-PEERS\n    remote_as: '65001'\n    description: DC1_SPINE2_Ethernet4\n  - ip_address: 192.168.255.1\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE1\n    remote_as: '65001'\n  - ip_address: 192.168.255.2\n    peer_group: EVPN-OVERLAY-PEERS\n    description: DC1_SPINE2\n    remote_as: '65001'\n  redistribute_routes:\n  - source_protocol: connected\n    route_map: RM-CONN-2-BGP\n  address_family_evpn:\n    peer_groups:\n    - name: EVPN-OVERLAY-PEERS\n      activate: true\n  vrfs:\n  - name: Tenant_A_OP_Zone\n    router_id: 192.168.255.6\n    rd: 192.168.255.6:10\n    route_targets:\n      import:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n      export:\n      - address_family: evpn\n        route_targets:\n        - '10:10'\n    redistribute_routes:\n    - source_protocol: connected\n    neighbors:\n    - ip_address: 10.255.251.4\n      peer_group: MLAG-IPv4-UNDERLAY-PEER\n  vlan_aware_bundles:\n  - name: Tenant_A_OP_Zone\n    rd: 192.168.255.6:10\n    route_targets:\n      both:\n      - '10:10'\n    redistribute_routes:\n    - learned\n    vlan: 112-113\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nip_routing: true\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 4096\n  no_spanning_tree_vlan: 4093-4094\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\n- name: Tenant_A_OP_Zone\n  tenant: Tenant_A\n  ip_routing: true\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.7/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4093\n  tenant: system\n  name: LEAF_PEER_L3\n  trunk_groups:\n  - LEAF_PEER_L3\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 112\n  name: Tenant_A_OP_Zone_3\n  tenant: Tenant_A\n- id: 113\n  name: Tenant_A_OP_Zone_4\n  tenant: Tenant_A\n- id: 3009\n  name: MLAG_iBGP_Tenant_A_OP_Zone\n  trunk_groups:\n  - LEAF_PEER_L3\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4093\n  description: MLAG_PEER_L3_PEERING\n  shutdown: false\n  mtu: 9214\n  ip_address: 10.255.251.5/31\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.5/31\n  no_autostate: true\n  mtu: 9214\n- name: Vlan112\n  tenant: Tenant_A\n  tags:\n  - opzone_pod2\n  description: Tenant_A_OP_Zone_3\n  shutdown: false\n  ip_address_virtual: 10.1.12.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan113\n  tenant: Tenant_A\n  tags:\n  - opzone_pod2\n  description: Tenant_A_OP_Zone_4\n  shutdown: false\n  ip_address_virtual: 10.1.13.1/24\n  vrf: Tenant_A_OP_Zone\n- name: Vlan3009\n  tenant: Tenant_A\n  type: underlay_peering\n  shutdown: false\n  description: 'MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone'\n  vrf: Tenant_A_OP_Zone\n  mtu: 9214\n  ip_address: 10.255.251.5/31\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_SVC2A_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - LEAF_PEER_L3\n  - MLAG\n- name: Port-Channel5\n  description: DC1_L2_LEAF_Po1\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: 112-113\n  mlag: 5\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_SVC2A\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_SVC2A_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_SVC2A\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_SVC2A_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SPINE1\n  peer_interface: Ethernet4\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE1_Ethernet4\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.13/31\n- name: Ethernet2\n  peer: DC1_SPINE2\n  peer_interface: Ethernet4\n  peer_type: spine\n  description: P2P_LINK_TO_DC1_SPINE2_Ethernet4\n  shutdown: false\n  mtu: 9214\n  type: routed\n  ip_address: 172.31.255.15/31\n- name: Ethernet5\n  peer: DC1_L2_LEAF2A\n  peer_interface: Ethernet2\n  peer_type: l2leaf\n  description: DC1_L2_LEAF2A_Ethernet2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: DC1_L2_LEAF2B\n  peer_interface: Ethernet2\n  peer_type: l2leaf\n  description: DC1_L2_LEAF2B_Ethernet2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\nmlag_configuration:\n  domain_id: DC1_SVC2\n  local_interface: Vlan4094\n  peer_address: 10.255.252.4\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nroute_maps:\n- name: RM-MLAG-PEER-IN\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    set:\n    - origin incomplete\n    description: Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n- name: RM-CONN-2-BGP\n  sequence_numbers:\n  - sequence: 10\n    type: permit\n    match:\n    - ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\nloopback_interfaces:\n- name: Loopback0\n  description: EVPN_Overlay_Peering\n  shutdown: false\n  ip_address: 192.168.255.6/32\n- name: Loopback1\n  description: VTEP_VXLAN_Tunnel_Source\n  shutdown: false\n  ip_address: 192.168.254.5/32\n- name: Loopback100\n  description: Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n  shutdown: false\n  vrf: Tenant_A_OP_Zone\n  ip_address: 10.255.1.6/32\nprefix_lists:\n- name: PL-LOOPBACKS-EVPN-OVERLAY\n  sequence_numbers:\n  - sequence: 10\n    action: permit 192.168.255.0/24 eq 32\n  - sequence: 20\n    action: permit 192.168.254.0/24 eq 32\nrouter_bfd:\n  multihop:\n    interval: 300\n    min_rx: 300\n    multiplier: 3\nip_igmp_snooping:\n  globally_enabled: true\nip_virtual_router_mac_address: 00:00:00:00:00:01\nvxlan_interface:\n  Vxlan1:\n    description: DC1_SVC2B_VTEP\n    vxlan:\n      udp_port: 4789\n      source_interface: Loopback1\n      virtual_router_encapsulation_mac_address: mlag-system-id\n      vlans:\n      - id: 112\n        vni: 10112\n      - id: 113\n        vni: 10113\n      vrfs:\n      - name: Tenant_A_OP_Zone\n        vni: 10\nvirtual_source_nat_vrfs:\n- name: Tenant_A_OP_Zone\n  ip_address: 10.255.1.6\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_L2_LEAF2A\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 16384\n  no_spanning_tree_vlan: '4094'\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.8/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 112\n  name: Tenant_A_OP_Zone_3\n  tenant: Tenant_A\n- id: 113\n  name: Tenant_A_OP_Zone_4\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.8/31\n  no_autostate: true\n  mtu: 9214\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_L2_LEAF2B_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - MLAG\n- name: Port-Channel1\n  description: DC1_SVC2_Po5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: 112-113\n  mlag: 1\n- name: Port-Channel5\n  description: server03_PortChannel5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '112'\n  spanning_tree_portfast: edge\n  mlag: 5\n- name: Port-Channel6\n  description: server04_PortChannel6\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '113'\n  spanning_tree_portfast: edge\n  mlag: 6\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_L2_LEAF2B\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_L2_LEAF2B_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_L2_LEAF2B\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_L2_LEAF2B_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SVC2A\n  peer_interface: Ethernet5\n  peer_type: l3leaf\n  description: DC1_SVC2A_Ethernet5\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 1\n    mode: active\n- name: Ethernet2\n  peer: DC1_SVC2B\n  peer_interface: Ethernet5\n  peer_type: l3leaf\n  description: DC1_SVC2B_Ethernet5\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 1\n    mode: active\n- name: Ethernet5\n  peer: server03\n  peer_interface: Eth1\n  peer_type: server\n  port_profile: Tenant_A_pod2_clientA\n  description: server03_Eth1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: server04\n  peer_interface: Eth1\n  peer_type: server\n  port_profile: Tenant_A_pod2_clientB\n  description: server04_Eth1\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 6\n    mode: active\nmlag_configuration:\n  domain_id: DC1_L2_LEAF\n  local_interface: Vlan4094\n  peer_address: 10.255.252.9\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nip_igmp_snooping:\n  globally_enabled: true\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <pre><code>hostname: DC1_L2_LEAF2B\nstatic_routes:\n- vrf: MGMT\n  destination_address_prefix: 0.0.0.0/0\n  gateway: 172.100.100.1\nservice_routing_protocols_model: multi-agent\nvlan_internal_order:\n  allocation: ascending\n  range:\n    beginning: 1006\n    ending: 1199\nip_name_servers:\n- ip_address: 1.1.1.1\n  vrf: MGMT\n- ip_address: 8.8.8.8\n  vrf: MGMT\nspanning_tree:\n  mode: mstp\n  mst_instances:\n  - id: '0'\n    priority: 16384\n  no_spanning_tree_vlan: '4094'\nlocal_users:\n- name: admin\n  privilege: 15\n  role: network-admin\n  sha512_password: $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\nvrfs:\n- name: MGMT\n  ip_routing: false\nmanagement_interfaces:\n- name: Management0\n  description: oob_management\n  shutdown: false\n  vrf: MGMT\n  ip_address: 172.100.100.9/24\n  gateway: 172.100.100.1\n  type: oob\nmanagement_api_http:\n  enable_vrfs:\n  - name: MGMT\n  enable_https: true\n  https_ssl_profile: eAPI\nvlans:\n- id: 4094\n  tenant: system\n  name: MLAG_PEER\n  trunk_groups:\n  - MLAG\n- id: 112\n  name: Tenant_A_OP_Zone_3\n  tenant: Tenant_A\n- id: 113\n  name: Tenant_A_OP_Zone_4\n  tenant: Tenant_A\nvlan_interfaces:\n- name: Vlan4094\n  description: MLAG_PEER\n  shutdown: false\n  ip_address: 10.255.252.9/31\n  no_autostate: true\n  mtu: 9214\nport_channel_interfaces:\n- name: Port-Channel3\n  description: MLAG_PEER_DC1_L2_LEAF2A_Po3\n  type: switched\n  shutdown: false\n  mode: trunk\n  trunk_groups:\n  - MLAG\n- name: Port-Channel1\n  description: DC1_SVC2_Po5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: 112-113\n  mlag: 1\n- name: Port-Channel5\n  description: server03_PortChannel5\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '112'\n  spanning_tree_portfast: edge\n  mlag: 5\n- name: Port-Channel6\n  description: server04_PortChannel6\n  type: switched\n  shutdown: false\n  mode: trunk\n  vlans: '113'\n  spanning_tree_portfast: edge\n  mlag: 6\nethernet_interfaces:\n- name: Ethernet3\n  peer: DC1_L2_LEAF2A\n  peer_interface: Ethernet3\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_L2_LEAF2A_Ethernet3\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet4\n  peer: DC1_L2_LEAF2A\n  peer_interface: Ethernet4\n  peer_type: mlag_peer\n  description: MLAG_PEER_DC1_L2_LEAF2A_Ethernet4\n  type: port-channel-member\n  shutdown: false\n  channel_group:\n    id: 3\n    mode: active\n- name: Ethernet1\n  peer: DC1_SVC2A\n  peer_interface: Ethernet6\n  peer_type: l3leaf\n  description: DC1_SVC2A_Ethernet6\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 1\n    mode: active\n- name: Ethernet2\n  peer: DC1_SVC2B\n  peer_interface: Ethernet6\n  peer_type: l3leaf\n  description: DC1_SVC2B_Ethernet6\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 1\n    mode: active\n- name: Ethernet5\n  peer: server03\n  peer_interface: Eth2\n  peer_type: server\n  port_profile: Tenant_A_pod2_clientA\n  description: server03_Eth2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 5\n    mode: active\n- name: Ethernet6\n  peer: server04\n  peer_interface: Eth2\n  peer_type: server\n  port_profile: Tenant_A_pod2_clientB\n  description: server04_Eth2\n  shutdown: false\n  type: port-channel-member\n  channel_group:\n    id: 6\n    mode: active\nmlag_configuration:\n  domain_id: DC1_L2_LEAF\n  local_interface: Vlan4094\n  peer_address: 10.255.252.8\n  peer_link: Port-Channel3\n  reload_delay_mlag: '300'\n  reload_delay_non_mlag: '330'\nip_igmp_snooping:\n  globally_enabled: true\nmanagement_security:\n  ssl_profiles:\n  - name: eAPI\n    certificate:\n      file: eAPI.crt\n      key: eAPI.key\n    cipher_list: HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n</code></pre> <ul> <li>From the third task in the playbook which uses <code>arista.avd.eos_cli_config_gen</code> we can see the intended EOS configuration per node is generated under <code>intended/configs</code> directory.</li> </ul> Reveal Output DC1_SPINE1.cfgDC1_SPINE2.cfgDC1_LEAF1A.cfgDC1_LEAF1B.cfgDC1_SVC2A.cfgDC1_SVC2B.cfgDC1_L2_LEAF2A.cfgDC1_L2_LEAF2B.cfg <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_SPINE1\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvrf instance MGMT\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_LEAF1A_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.0/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_LEAF1B_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.4/31\n!\ninterface Ethernet3\n   description P2P_LINK_TO_DC1_SVC2A_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.8/31\n!\ninterface Ethernet4\n   description P2P_LINK_TO_DC1_SVC2B_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.12/31\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.1/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.2/24\n!\nip routing\nno ip routing vrf MGMT\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65001\n   router-id 192.168.255.1\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS next-hop-unchanged\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor 172.31.255.1 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.1 remote-as 65101\n   neighbor 172.31.255.1 description DC1_LEAF1A_Ethernet1\n   neighbor 172.31.255.5 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.5 remote-as 65101\n   neighbor 172.31.255.5 description DC1_LEAF1B_Ethernet1\n   neighbor 172.31.255.9 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.9 remote-as 65102\n   neighbor 172.31.255.9 description DC1_SVC2A_Ethernet1\n   neighbor 172.31.255.13 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.13 remote-as 65102\n   neighbor 172.31.255.13 description DC1_SVC2B_Ethernet1\n   neighbor 192.168.255.3 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.3 remote-as 65101\n   neighbor 192.168.255.3 description DC1_LEAF1A\n   neighbor 192.168.255.4 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.4 remote-as 65101\n   neighbor 192.168.255.4 description DC1_LEAF1B\n   neighbor 192.168.255.5 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.5 remote-as 65102\n   neighbor 192.168.255.5 description DC1_SVC2A\n   neighbor 192.168.255.6 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.6 remote-as 65102\n   neighbor 192.168.255.6 description DC1_SVC2B\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_SPINE2\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvrf instance MGMT\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_LEAF1A_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.2/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_LEAF1B_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.6/31\n!\ninterface Ethernet3\n   description P2P_LINK_TO_DC1_SVC2A_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.10/31\n!\ninterface Ethernet4\n   description P2P_LINK_TO_DC1_SVC2B_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.14/31\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.2/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.3/24\n!\nip routing\nno ip routing vrf MGMT\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65001\n   router-id 192.168.255.2\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS next-hop-unchanged\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor 172.31.255.3 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.3 remote-as 65101\n   neighbor 172.31.255.3 description DC1_LEAF1A_Ethernet2\n   neighbor 172.31.255.7 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.7 remote-as 65101\n   neighbor 172.31.255.7 description DC1_LEAF1B_Ethernet2\n   neighbor 172.31.255.11 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.11 remote-as 65102\n   neighbor 172.31.255.11 description DC1_SVC2A_Ethernet2\n   neighbor 172.31.255.15 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.15 remote-as 65102\n   neighbor 172.31.255.15 description DC1_SVC2B_Ethernet2\n   neighbor 192.168.255.3 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.3 remote-as 65101\n   neighbor 192.168.255.3 description DC1_LEAF1A\n   neighbor 192.168.255.4 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.4 remote-as 65101\n   neighbor 192.168.255.4 description DC1_LEAF1B\n   neighbor 192.168.255.5 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.5 remote-as 65102\n   neighbor 192.168.255.5 description DC1_SVC2A\n   neighbor 192.168.255.6 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.6 remote-as 65102\n   neighbor 192.168.255.6 description DC1_SVC2B\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_LEAF1A\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4093-4094\nspanning-tree mst 0 priority 4096\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 110\n   name Tenant_A_OP_Zone_1\n!\nvlan 111\n   name Tenant_A_OP_Zone_2\n!\nvlan 3009\n   name MLAG_iBGP_Tenant_A_OP_Zone\n   trunk group LEAF_PEER_L3\n!\nvlan 4093\n   name LEAF_PEER_L3\n   trunk group LEAF_PEER_L3\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\nvrf instance Tenant_A_OP_Zone\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_LEAF1B_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group LEAF_PEER_L3\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description server01_PortChannel5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 110\n   switchport mode trunk\n   mlag 5\n   spanning-tree portfast\n!\ninterface Port-Channel6\n   description server02_PortChannel6\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 111\n   switchport mode trunk\n   mlag 6\n   spanning-tree portfast\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_SPINE1_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.1/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_SPINE2_Ethernet1\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.3/31\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_LEAF1B_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_LEAF1B_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description server01_Eth1\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description server02_Eth1\n   no shutdown\n   channel-group 6 mode active\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.3/32\n!\ninterface Loopback1\n   description VTEP_VXLAN_Tunnel_Source\n   no shutdown\n   ip address 192.168.254.3/32\n!\ninterface Loopback100\n   description Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.1.3/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.4/24\n!\ninterface Vlan110\n   description Tenant_A_OP_Zone_1\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.10.1/24\n!\ninterface Vlan111\n   description Tenant_A_OP_Zone_2\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.11.1/24\n!\ninterface Vlan3009\n   description MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone\n   no shutdown\n   mtu 9214\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.251.0/31\n!\ninterface Vlan4093\n   description MLAG_PEER_L3_PEERING\n   no shutdown\n   mtu 9214\n   ip address 10.255.251.0/31\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.0/31\n!\ninterface Vxlan1\n   description DC1_LEAF1A_VTEP\n   vxlan source-interface Loopback1\n   vxlan virtual-router encapsulation mac-address mlag-system-id\n   vxlan udp-port 4789\n   vxlan vlan 110 vni 10110\n   vxlan vlan 111 vni 10111\n   vxlan vrf Tenant_A_OP_Zone vni 10\n!\nip virtual-router mac-address 00:00:00:00:00:01\n!\nip address virtual source-nat vrf Tenant_A_OP_Zone address 10.255.1.3\n!\nip routing\nno ip routing vrf MGMT\nip routing vrf Tenant_A_OP_Zone\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n   seq 20 permit 192.168.254.0/24 eq 32\n!\nmlag configuration\n   domain-id DC1_LEAF1\n   local-interface Vlan4094\n   peer-address 10.255.252.1\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nroute-map RM-MLAG-PEER-IN permit 10\n   description Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n   set origin incomplete\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65101\n   router-id 192.168.255.3\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER peer group\n   neighbor MLAG-IPv4-UNDERLAY-PEER remote-as 65101\n   neighbor MLAG-IPv4-UNDERLAY-PEER next-hop-self\n   neighbor MLAG-IPv4-UNDERLAY-PEER description DC1_LEAF1B\n   neighbor MLAG-IPv4-UNDERLAY-PEER password 7 vnEaG8gMeQf3d3cN6PktXQ==\n   neighbor MLAG-IPv4-UNDERLAY-PEER send-community\n   neighbor MLAG-IPv4-UNDERLAY-PEER maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER route-map RM-MLAG-PEER-IN in\n   neighbor 10.255.251.1 peer group MLAG-IPv4-UNDERLAY-PEER\n   neighbor 10.255.251.1 description DC1_LEAF1B\n   neighbor 172.31.255.0 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.0 remote-as 65001\n   neighbor 172.31.255.0 description DC1_SPINE1_Ethernet1\n   neighbor 172.31.255.2 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.2 remote-as 65001\n   neighbor 172.31.255.2 description DC1_SPINE2_Ethernet1\n   neighbor 192.168.255.1 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.1 remote-as 65001\n   neighbor 192.168.255.1 description DC1_SPINE1\n   neighbor 192.168.255.2 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.2 remote-as 65001\n   neighbor 192.168.255.2 description DC1_SPINE2\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   vlan-aware-bundle Tenant_A_OP_Zone\n      rd 192.168.255.3:10\n      route-target both 10:10\n      redistribute learned\n      vlan 110-111\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n      neighbor MLAG-IPv4-UNDERLAY-PEER activate\n   !\n   vrf Tenant_A_OP_Zone\n      rd 192.168.255.3:10\n      route-target import evpn 10:10\n      route-target export evpn 10:10\n      router-id 192.168.255.3\n      neighbor 10.255.251.1 peer group MLAG-IPv4-UNDERLAY-PEER\n      redistribute connected\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_LEAF1B\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4093-4094\nspanning-tree mst 0 priority 4096\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 110\n   name Tenant_A_OP_Zone_1\n!\nvlan 111\n   name Tenant_A_OP_Zone_2\n!\nvlan 3009\n   name MLAG_iBGP_Tenant_A_OP_Zone\n   trunk group LEAF_PEER_L3\n!\nvlan 4093\n   name LEAF_PEER_L3\n   trunk group LEAF_PEER_L3\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\nvrf instance Tenant_A_OP_Zone\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_LEAF1A_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group LEAF_PEER_L3\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description server01_PortChannel5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 110\n   switchport mode trunk\n   mlag 5\n   spanning-tree portfast\n!\ninterface Port-Channel6\n   description server02_PortChannel6\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 111\n   switchport mode trunk\n   mlag 6\n   spanning-tree portfast\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_SPINE1_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.5/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_SPINE2_Ethernet2\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.7/31\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_LEAF1A_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_LEAF1A_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description server01_Eth2\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description server02_Eth2\n   no shutdown\n   channel-group 6 mode active\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.4/32\n!\ninterface Loopback1\n   description VTEP_VXLAN_Tunnel_Source\n   no shutdown\n   ip address 192.168.254.3/32\n!\ninterface Loopback100\n   description Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.1.4/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.5/24\n!\ninterface Vlan110\n   description Tenant_A_OP_Zone_1\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.10.1/24\n!\ninterface Vlan111\n   description Tenant_A_OP_Zone_2\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.11.1/24\n!\ninterface Vlan3009\n   description MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone\n   no shutdown\n   mtu 9214\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.251.1/31\n!\ninterface Vlan4093\n   description MLAG_PEER_L3_PEERING\n   no shutdown\n   mtu 9214\n   ip address 10.255.251.1/31\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.1/31\n!\ninterface Vxlan1\n   description DC1_LEAF1B_VTEP\n   vxlan source-interface Loopback1\n   vxlan virtual-router encapsulation mac-address mlag-system-id\n   vxlan udp-port 4789\n   vxlan vlan 110 vni 10110\n   vxlan vlan 111 vni 10111\n   vxlan vrf Tenant_A_OP_Zone vni 10\n!\nip virtual-router mac-address 00:00:00:00:00:01\n!\nip address virtual source-nat vrf Tenant_A_OP_Zone address 10.255.1.4\n!\nip routing\nno ip routing vrf MGMT\nip routing vrf Tenant_A_OP_Zone\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n   seq 20 permit 192.168.254.0/24 eq 32\n!\nmlag configuration\n   domain-id DC1_LEAF1\n   local-interface Vlan4094\n   peer-address 10.255.252.0\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nroute-map RM-MLAG-PEER-IN permit 10\n   description Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n   set origin incomplete\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65101\n   router-id 192.168.255.4\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER peer group\n   neighbor MLAG-IPv4-UNDERLAY-PEER remote-as 65101\n   neighbor MLAG-IPv4-UNDERLAY-PEER next-hop-self\n   neighbor MLAG-IPv4-UNDERLAY-PEER description DC1_LEAF1A\n   neighbor MLAG-IPv4-UNDERLAY-PEER password 7 vnEaG8gMeQf3d3cN6PktXQ==\n   neighbor MLAG-IPv4-UNDERLAY-PEER send-community\n   neighbor MLAG-IPv4-UNDERLAY-PEER maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER route-map RM-MLAG-PEER-IN in\n   neighbor 10.255.251.0 peer group MLAG-IPv4-UNDERLAY-PEER\n   neighbor 10.255.251.0 description DC1_LEAF1A\n   neighbor 172.31.255.4 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.4 remote-as 65001\n   neighbor 172.31.255.4 description DC1_SPINE1_Ethernet2\n   neighbor 172.31.255.6 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.6 remote-as 65001\n   neighbor 172.31.255.6 description DC1_SPINE2_Ethernet2\n   neighbor 192.168.255.1 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.1 remote-as 65001\n   neighbor 192.168.255.1 description DC1_SPINE1\n   neighbor 192.168.255.2 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.2 remote-as 65001\n   neighbor 192.168.255.2 description DC1_SPINE2\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   vlan-aware-bundle Tenant_A_OP_Zone\n      rd 192.168.255.4:10\n      route-target both 10:10\n      redistribute learned\n      vlan 110-111\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n      neighbor MLAG-IPv4-UNDERLAY-PEER activate\n   !\n   vrf Tenant_A_OP_Zone\n      rd 192.168.255.4:10\n      route-target import evpn 10:10\n      route-target export evpn 10:10\n      router-id 192.168.255.4\n      neighbor 10.255.251.0 peer group MLAG-IPv4-UNDERLAY-PEER\n      redistribute connected\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_SVC2A\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4093-4094\nspanning-tree mst 0 priority 4096\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 112\n   name Tenant_A_OP_Zone_3\n!\nvlan 113\n   name Tenant_A_OP_Zone_4\n!\nvlan 3009\n   name MLAG_iBGP_Tenant_A_OP_Zone\n   trunk group LEAF_PEER_L3\n!\nvlan 4093\n   name LEAF_PEER_L3\n   trunk group LEAF_PEER_L3\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\nvrf instance Tenant_A_OP_Zone\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_SVC2B_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group LEAF_PEER_L3\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description DC1_L2_LEAF_Po1\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112-113\n   switchport mode trunk\n   mlag 5\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_SPINE1_Ethernet3\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.9/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_SPINE2_Ethernet3\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.11/31\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_SVC2B_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_SVC2B_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description DC1_L2_LEAF2A_Ethernet1\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description DC1_L2_LEAF2B_Ethernet1\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.5/32\n!\ninterface Loopback1\n   description VTEP_VXLAN_Tunnel_Source\n   no shutdown\n   ip address 192.168.254.5/32\n!\ninterface Loopback100\n   description Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.1.5/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.6/24\n!\ninterface Vlan112\n   description Tenant_A_OP_Zone_3\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.12.1/24\n!\ninterface Vlan113\n   description Tenant_A_OP_Zone_4\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.13.1/24\n!\ninterface Vlan3009\n   description MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone\n   no shutdown\n   mtu 9214\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.251.4/31\n!\ninterface Vlan4093\n   description MLAG_PEER_L3_PEERING\n   no shutdown\n   mtu 9214\n   ip address 10.255.251.4/31\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.4/31\n!\ninterface Vxlan1\n   description DC1_SVC2A_VTEP\n   vxlan source-interface Loopback1\n   vxlan virtual-router encapsulation mac-address mlag-system-id\n   vxlan udp-port 4789\n   vxlan vlan 112 vni 10112\n   vxlan vlan 113 vni 10113\n   vxlan vrf Tenant_A_OP_Zone vni 10\n!\nip virtual-router mac-address 00:00:00:00:00:01\n!\nip address virtual source-nat vrf Tenant_A_OP_Zone address 10.255.1.5\n!\nip routing\nno ip routing vrf MGMT\nip routing vrf Tenant_A_OP_Zone\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n   seq 20 permit 192.168.254.0/24 eq 32\n!\nmlag configuration\n   domain-id DC1_SVC2\n   local-interface Vlan4094\n   peer-address 10.255.252.5\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nroute-map RM-MLAG-PEER-IN permit 10\n   description Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n   set origin incomplete\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65102\n   router-id 192.168.255.5\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER peer group\n   neighbor MLAG-IPv4-UNDERLAY-PEER remote-as 65102\n   neighbor MLAG-IPv4-UNDERLAY-PEER next-hop-self\n   neighbor MLAG-IPv4-UNDERLAY-PEER description DC1_SVC2B\n   neighbor MLAG-IPv4-UNDERLAY-PEER password 7 vnEaG8gMeQf3d3cN6PktXQ==\n   neighbor MLAG-IPv4-UNDERLAY-PEER send-community\n   neighbor MLAG-IPv4-UNDERLAY-PEER maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER route-map RM-MLAG-PEER-IN in\n   neighbor 10.255.251.5 peer group MLAG-IPv4-UNDERLAY-PEER\n   neighbor 10.255.251.5 description DC1_SVC2B\n   neighbor 172.31.255.8 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.8 remote-as 65001\n   neighbor 172.31.255.8 description DC1_SPINE1_Ethernet3\n   neighbor 172.31.255.10 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.10 remote-as 65001\n   neighbor 172.31.255.10 description DC1_SPINE2_Ethernet3\n   neighbor 192.168.255.1 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.1 remote-as 65001\n   neighbor 192.168.255.1 description DC1_SPINE1\n   neighbor 192.168.255.2 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.2 remote-as 65001\n   neighbor 192.168.255.2 description DC1_SPINE2\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   vlan-aware-bundle Tenant_A_OP_Zone\n      rd 192.168.255.5:10\n      route-target both 10:10\n      redistribute learned\n      vlan 112-113\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n      neighbor MLAG-IPv4-UNDERLAY-PEER activate\n   !\n   vrf Tenant_A_OP_Zone\n      rd 192.168.255.5:10\n      route-target import evpn 10:10\n      route-target export evpn 10:10\n      router-id 192.168.255.5\n      neighbor 10.255.251.5 peer group MLAG-IPv4-UNDERLAY-PEER\n      redistribute connected\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_SVC2B\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4093-4094\nspanning-tree mst 0 priority 4096\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 112\n   name Tenant_A_OP_Zone_3\n!\nvlan 113\n   name Tenant_A_OP_Zone_4\n!\nvlan 3009\n   name MLAG_iBGP_Tenant_A_OP_Zone\n   trunk group LEAF_PEER_L3\n!\nvlan 4093\n   name LEAF_PEER_L3\n   trunk group LEAF_PEER_L3\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\nvrf instance Tenant_A_OP_Zone\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_SVC2A_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group LEAF_PEER_L3\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description DC1_L2_LEAF_Po1\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112-113\n   switchport mode trunk\n   mlag 5\n!\ninterface Ethernet1\n   description P2P_LINK_TO_DC1_SPINE1_Ethernet4\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.13/31\n!\ninterface Ethernet2\n   description P2P_LINK_TO_DC1_SPINE2_Ethernet4\n   no shutdown\n   mtu 9214\n   no switchport\n   ip address 172.31.255.15/31\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_SVC2A_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_SVC2A_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description DC1_L2_LEAF2A_Ethernet2\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description DC1_L2_LEAF2B_Ethernet2\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Loopback0\n   description EVPN_Overlay_Peering\n   no shutdown\n   ip address 192.168.255.6/32\n!\ninterface Loopback1\n   description VTEP_VXLAN_Tunnel_Source\n   no shutdown\n   ip address 192.168.254.5/32\n!\ninterface Loopback100\n   description Tenant_A_OP_Zone_VTEP_DIAGNOSTICS\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.1.6/32\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.7/24\n!\ninterface Vlan112\n   description Tenant_A_OP_Zone_3\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.12.1/24\n!\ninterface Vlan113\n   description Tenant_A_OP_Zone_4\n   no shutdown\n   vrf Tenant_A_OP_Zone\n   ip address virtual 10.1.13.1/24\n!\ninterface Vlan3009\n   description MLAG_PEER_L3_iBGP: vrf Tenant_A_OP_Zone\n   no shutdown\n   mtu 9214\n   vrf Tenant_A_OP_Zone\n   ip address 10.255.251.5/31\n!\ninterface Vlan4093\n   description MLAG_PEER_L3_PEERING\n   no shutdown\n   mtu 9214\n   ip address 10.255.251.5/31\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.5/31\n!\ninterface Vxlan1\n   description DC1_SVC2B_VTEP\n   vxlan source-interface Loopback1\n   vxlan virtual-router encapsulation mac-address mlag-system-id\n   vxlan udp-port 4789\n   vxlan vlan 112 vni 10112\n   vxlan vlan 113 vni 10113\n   vxlan vrf Tenant_A_OP_Zone vni 10\n!\nip virtual-router mac-address 00:00:00:00:00:01\n!\nip address virtual source-nat vrf Tenant_A_OP_Zone address 10.255.1.6\n!\nip routing\nno ip routing vrf MGMT\nip routing vrf Tenant_A_OP_Zone\n!\nip prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n   seq 10 permit 192.168.255.0/24 eq 32\n   seq 20 permit 192.168.254.0/24 eq 32\n!\nmlag configuration\n   domain-id DC1_SVC2\n   local-interface Vlan4094\n   peer-address 10.255.252.4\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nroute-map RM-CONN-2-BGP permit 10\n   match ip address prefix-list PL-LOOPBACKS-EVPN-OVERLAY\n!\nroute-map RM-MLAG-PEER-IN permit 10\n   description Make routes learned over MLAG Peer-link less preferred on spines to ensure optimal routing\n   set origin incomplete\n!\nrouter bfd\n   multihop interval 300 min-rx 300 multiplier 3\n!\nrouter bgp 65102\n   router-id 192.168.255.6\n   distance bgp 20 200 200\n   maximum-paths 4 ecmp 4\n   no bgp default ipv4-unicast\n   neighbor EVPN-OVERLAY-PEERS peer group\n   neighbor EVPN-OVERLAY-PEERS update-source Loopback0\n   neighbor EVPN-OVERLAY-PEERS bfd\n   neighbor EVPN-OVERLAY-PEERS ebgp-multihop 3\n   neighbor EVPN-OVERLAY-PEERS password 7 q+VNViP5i4rVjW1cxFv2wA==\n   neighbor EVPN-OVERLAY-PEERS send-community\n   neighbor EVPN-OVERLAY-PEERS maximum-routes 0\n   neighbor IPv4-UNDERLAY-PEERS peer group\n   neighbor IPv4-UNDERLAY-PEERS password 7 AQQvKeimxJu+uGQ/yYvv9w==\n   neighbor IPv4-UNDERLAY-PEERS send-community\n   neighbor IPv4-UNDERLAY-PEERS maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER peer group\n   neighbor MLAG-IPv4-UNDERLAY-PEER remote-as 65102\n   neighbor MLAG-IPv4-UNDERLAY-PEER next-hop-self\n   neighbor MLAG-IPv4-UNDERLAY-PEER description DC1_SVC2A\n   neighbor MLAG-IPv4-UNDERLAY-PEER password 7 vnEaG8gMeQf3d3cN6PktXQ==\n   neighbor MLAG-IPv4-UNDERLAY-PEER send-community\n   neighbor MLAG-IPv4-UNDERLAY-PEER maximum-routes 12000\n   neighbor MLAG-IPv4-UNDERLAY-PEER route-map RM-MLAG-PEER-IN in\n   neighbor 10.255.251.4 peer group MLAG-IPv4-UNDERLAY-PEER\n   neighbor 10.255.251.4 description DC1_SVC2A\n   neighbor 172.31.255.12 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.12 remote-as 65001\n   neighbor 172.31.255.12 description DC1_SPINE1_Ethernet4\n   neighbor 172.31.255.14 peer group IPv4-UNDERLAY-PEERS\n   neighbor 172.31.255.14 remote-as 65001\n   neighbor 172.31.255.14 description DC1_SPINE2_Ethernet4\n   neighbor 192.168.255.1 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.1 remote-as 65001\n   neighbor 192.168.255.1 description DC1_SPINE1\n   neighbor 192.168.255.2 peer group EVPN-OVERLAY-PEERS\n   neighbor 192.168.255.2 remote-as 65001\n   neighbor 192.168.255.2 description DC1_SPINE2\n   redistribute connected route-map RM-CONN-2-BGP\n   !\n   vlan-aware-bundle Tenant_A_OP_Zone\n      rd 192.168.255.6:10\n      route-target both 10:10\n      redistribute learned\n      vlan 112-113\n   !\n   address-family evpn\n      neighbor EVPN-OVERLAY-PEERS activate\n   !\n   address-family ipv4\n      no neighbor EVPN-OVERLAY-PEERS activate\n      neighbor IPv4-UNDERLAY-PEERS activate\n      neighbor MLAG-IPv4-UNDERLAY-PEER activate\n   !\n   vrf Tenant_A_OP_Zone\n      rd 192.168.255.6:10\n      route-target import evpn 10:10\n      route-target export evpn 10:10\n      router-id 192.168.255.6\n      neighbor 10.255.251.4 peer group MLAG-IPv4-UNDERLAY-PEER\n      redistribute connected\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_L2_LEAF2A\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4094\nspanning-tree mst 0 priority 16384\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 112\n   name Tenant_A_OP_Zone_3\n!\nvlan 113\n   name Tenant_A_OP_Zone_4\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\ninterface Port-Channel1\n   description DC1_SVC2_Po5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112-113\n   switchport mode trunk\n   mlag 1\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_L2_LEAF2B_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description server03_PortChannel5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112\n   switchport mode trunk\n   mlag 5\n   spanning-tree portfast\n!\ninterface Port-Channel6\n   description server04_PortChannel6\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 113\n   switchport mode trunk\n   mlag 6\n   spanning-tree portfast\n!\ninterface Ethernet1\n   description DC1_SVC2A_Ethernet5\n   no shutdown\n   channel-group 1 mode active\n!\ninterface Ethernet2\n   description DC1_SVC2B_Ethernet5\n   no shutdown\n   channel-group 1 mode active\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_L2_LEAF2B_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_L2_LEAF2B_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description server03_Eth1\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description server04_Eth1\n   no shutdown\n   channel-group 6 mode active\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.8/24\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.8/31\n!\nip routing\nno ip routing vrf MGMT\n!\nmlag configuration\n   domain-id DC1_L2_LEAF\n   local-interface Vlan4094\n   peer-address 10.255.252.9\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <pre><code>!RANCID-CONTENT-TYPE: arista\n!\nvlan internal order ascending range 1006 1199\n!\ntransceiver qsfp default-mode 4x10G\n!\nservice routing protocols model multi-agent\n!\nhostname DC1_L2_LEAF2B\nip name-server vrf MGMT 1.1.1.1\nip name-server vrf MGMT 8.8.8.8\n!\nntp server vrf MGMT time.google.com prefer iburst\n!\nspanning-tree mode mstp\nno spanning-tree vlan-id 4094\nspanning-tree mst 0 priority 16384\n!\nno enable password\nno aaa root\n!\nusername admin privilege 15 role network-admin secret sha512 $6$7GTxsrRjnwheeKfR$zhJ8qycVjAJz41rf5JRSfWIzp93IL5WL7sMS/Taz1yfShz.MAnoajCf7R2n1/EZW7PN5QA3Huayl0lVQesBYN1\n!\nvlan 112\n   name Tenant_A_OP_Zone_3\n!\nvlan 113\n   name Tenant_A_OP_Zone_4\n!\nvlan 4094\n   name MLAG_PEER\n   trunk group MLAG\n!\nvrf instance MGMT\n!\ninterface Port-Channel1\n   description DC1_SVC2_Po5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112-113\n   switchport mode trunk\n   mlag 1\n!\ninterface Port-Channel3\n   description MLAG_PEER_DC1_L2_LEAF2A_Po3\n   no shutdown\n   switchport\n   switchport mode trunk\n   switchport trunk group MLAG\n!\ninterface Port-Channel5\n   description server03_PortChannel5\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 112\n   switchport mode trunk\n   mlag 5\n   spanning-tree portfast\n!\ninterface Port-Channel6\n   description server04_PortChannel6\n   no shutdown\n   switchport\n   switchport trunk allowed vlan 113\n   switchport mode trunk\n   mlag 6\n   spanning-tree portfast\n!\ninterface Ethernet1\n   description DC1_SVC2A_Ethernet6\n   no shutdown\n   channel-group 1 mode active\n!\ninterface Ethernet2\n   description DC1_SVC2B_Ethernet6\n   no shutdown\n   channel-group 1 mode active\n!\ninterface Ethernet3\n   description MLAG_PEER_DC1_L2_LEAF2A_Ethernet3\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet4\n   description MLAG_PEER_DC1_L2_LEAF2A_Ethernet4\n   no shutdown\n   channel-group 3 mode active\n!\ninterface Ethernet5\n   description server03_Eth2\n   no shutdown\n   channel-group 5 mode active\n!\ninterface Ethernet6\n   description server04_Eth2\n   no shutdown\n   channel-group 6 mode active\n!\ninterface Management0\n   description oob_management\n   no shutdown\n   vrf MGMT\n   ip address 172.100.100.9/24\n!\ninterface Vlan4094\n   description MLAG_PEER\n   no shutdown\n   mtu 9214\n   no autostate\n   ip address 10.255.252.9/31\n!\nip routing\nno ip routing vrf MGMT\n!\nmlag configuration\n   domain-id DC1_L2_LEAF\n   local-interface Vlan4094\n   peer-address 10.255.252.8\n   peer-link Port-Channel3\n   reload-delay mlag 300\n   reload-delay non-mlag 330\n!\nip route vrf MGMT 0.0.0.0/0 172.100.100.1\n!\nmanagement api http-commands\n   protocol https\n   protocol https ssl profile eAPI\n   no shutdown\n   !\n   vrf MGMT\n      no shutdown\n!\nmanagement security\n   ssl profile eAPI\n      cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n      certificate eAPI.crt key eAPI.key\n!\nend\n</code></pre> <ul> <li>From the fourth task in the playbook which uses <code>arista.avd.eos_config_deploy_eapi</code> the configuration is deployed directly to cEOS-lab nodes using eAPI.</li> </ul>"},{"location":"quickStart/#configuring-end-hosts","title":"Configuring end hosts","text":"Info <p>The below steps are only applicable if using default alpine-host containers as clients / end hosts.</p> <ul> <li>Run the <code>host_l3_config/l3_build.sh</code> script to configure the following on the alpine-host end clients.<ul> <li> bond interface</li> <li> Client IP address</li> <li> Gateway IP and static route</li> </ul> </li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Reveal Output <pre><code>[INFO] Configuring clab-avdirb-client1\nclient1\nteam0.110 Link encap:Ethernet  HWaddr AA:C1:AB:27:F2:6C\n          inet addr:10.1.10.101  Bcast:10.1.10.255  Mask:255.255.255.0\n          inet6 addr: fe80::a8c1:abff:fe27:f26c/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:0 (0.0 B)  TX bytes:90 (90.0 B)\n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.100.100.1   0.0.0.0         UG    0      0        0 eth0\n10.1.0.0        10.1.10.1       255.255.0.0     UG    0      0        0 team0.110\n10.1.10.0       0.0.0.0         255.255.255.0   U     0      0        0 team0.110\n172.100.100.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n[INFO] Configuring clab-avdirb-client2\nclient2\nteam0.111 Link encap:Ethernet  HWaddr AA:C1:AB:72:02:D1\n          inet addr:10.1.11.102  Bcast:10.1.11.255  Mask:255.255.255.0\n          inet6 addr: fe80::a8c1:abff:fe72:2d1/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:0 (0.0 B)  TX bytes:90 (90.0 B)\n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.100.100.1   0.0.0.0         UG    0      0        0 eth0\n10.1.0.0        10.1.11.1       255.255.0.0     UG    0      0        0 team0.111\n10.1.11.0       0.0.0.0         255.255.255.0   U     0      0        0 team0.111\n172.100.100.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n[INFO] Configuring clab-avdirb-client3\nclient3\nteam0.112 Link encap:Ethernet  HWaddr AA:C1:AB:E6:20:F5\n          inet addr:10.1.12.103  Bcast:10.1.12.255  Mask:255.255.255.0\n          inet6 addr: fe80::a8c1:abff:fee6:20f5/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:0 (0.0 B)  TX bytes:90 (90.0 B)\n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.100.100.1   0.0.0.0         UG    0      0        0 eth0\n10.1.0.0        10.1.12.1       255.255.0.0     UG    0      0        0 team0.112\n10.1.12.0       0.0.0.0         255.255.255.0   U     0      0        0 team0.112\n172.100.100.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n[INFO] Configuring clab-avdirb-client4\nclient4\nteam0.113 Link encap:Ethernet  HWaddr AA:C1:AB:0E:06:7D\n          inet addr:10.1.13.104  Bcast:10.1.13.255  Mask:255.255.255.0\n          inet6 addr: fe80::a8c1:abff:fe0e:67d/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000\n          RX bytes:0 (0.0 B)  TX bytes:90 (90.0 B)\n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.100.100.1   0.0.0.0         UG    0      0        0 eth0\n10.1.0.0        10.1.13.1       255.255.0.0     UG    0      0        0 team0.113\n10.1.13.0       0.0.0.0         255.255.255.0   U     0      0        0 team0.113\n172.100.100.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n[INFO] Completed\nUse [ docker exec -it clab-avdirb-client&lt;x&gt; /bin/sh ] to login in host.\n</code></pre>"},{"location":"quickStart/#deployment-validation","title":"Deployment Validation","text":"<ul> <li>Once the configuration is complete, let's validate the states of the devices in the topology.</li> <li>Login to the cEOS-lab node using SSH or <code>docker exec</code></li> </ul> SSHdocker exec <pre><code>ssh admin@172.100.100.2\n</code></pre> <pre><code>docker exec -it clab-avdirb-spine1 Cli\n</code></pre> Underlay BGP Peering DC1_SPINE1DC1_SPINE2DC1_LEAF1ADC1_LEAF1BDC1_SVC2ADC1_SVC2B <pre><code>DC1_SPINE1#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.1, local AS number 65001\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1A_Ethernet1     172.31.255.1  4 65101            133       130    0    0 01:46:04 Estab   3      3\n  DC1_LEAF1B_Ethernet1     172.31.255.5  4 65101            130       134    0    0 01:46:02 Estab   3      3\n  DC1_SVC2A_Ethernet1      172.31.255.9  4 65102            131       134    0    0 01:46:02 Estab   3      3\n  DC1_SVC2B_Ethernet1      172.31.255.13 4 65102            131       130    0    0 01:46:02 Estab   3      3\n</code></pre> <pre><code>DC1_SPINE2#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.2, local AS number 65001\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1A_Ethernet2     172.31.255.3  4 65101            132       133    0    0 01:46:55 Estab   3      3\n  DC1_LEAF1B_Ethernet2     172.31.255.7  4 65101            133       133    0    0 01:46:52 Estab   3      3\n  DC1_SVC2A_Ethernet2      172.31.255.11 4 65102            133       133    0    0 01:46:52 Estab   3      3\n  DC1_SVC2B_Ethernet2      172.31.255.15 4 65102            134       132    0    0 01:46:52 Estab   3      3\n</code></pre> <pre><code>DC1_LEAF1A#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.3, local AS number 65101\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor     V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1B               10.255.251.1 4 65101            132       133    0    0 01:48:20 Estab   7      7\n  DC1_SPINE1_Ethernet1     172.31.255.0 4 65001            133       136    0    0 01:48:24 Estab   4      4\n  DC1_SPINE2_Ethernet1     172.31.255.2 4 65001            135       134    0    0 01:48:25 Estab   4      4\n</code></pre> <pre><code>DC1_LEAF1B#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.4, local AS number 65101\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor     V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1A               10.255.251.0 4 65101            134       134    0    0 01:49:18 Estab   7      7\n  DC1_SPINE1_Ethernet2     172.31.255.4 4 65001            137       134    0    0 01:49:20 Estab   4      4\n  DC1_SPINE2_Ethernet2     172.31.255.6 4 65001            136       136    0    0 01:49:20 Estab   4      4\n</code></pre> <pre><code>DC1_SVC2A#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.5, local AS number 65102\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SVC2B                10.255.251.5  4 65102            134       136    0    0 01:49:44 Estab   7      7\n  DC1_SPINE1_Ethernet3     172.31.255.8  4 65001            138       136    0    0 01:49:47 Estab   4      4\n  DC1_SPINE2_Ethernet3     172.31.255.10 4 65001            137       136    0    0 01:49:47 Estab   4      4\n</code></pre> <pre><code>DC1_SVC2B#show ip bgp summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.6, local AS number 65102\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SVC2A                10.255.251.4  4 65102            137       134    0    0 01:49:54 Estab   7      7\n  DC1_SPINE1_Ethernet4     172.31.255.12 4 65001            135       135    0    0 01:49:57 Estab   4      4\n  DC1_SPINE2_Ethernet4     172.31.255.14 4 65001            136       138    0    0 01:49:57 Estab   4      4\n</code></pre> Overlay EVPN Peering DC1_SPINE1DC1_SPINE2DC1_LEAF1ADC1_LEAF1BDC1_SVC2ADC1_SVC2B <pre><code>DC1_SPINE1&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.1, local AS number 65001\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1A               192.168.255.3 4 65101            162       166    0    0 01:48:35 Estab   7      7\n  DC1_LEAF1B               192.168.255.4 4 65101            163       166    0    0 01:48:31 Estab   7      7\n  DC1_SVC2A                192.168.255.5 4 65102            159       167    0    0 01:48:31 Estab   7      7\n  DC1_SVC2B                192.168.255.6 4 65102            160       164    0    0 01:48:31 Estab   7      7\n</code></pre> <pre><code>DC1_SPINE2&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.2, local AS number 65001\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_LEAF1A               192.168.255.3 4 65101            162       165    0    0 01:48:59 Estab   7      7\n  DC1_LEAF1B               192.168.255.4 4 65101            159       166    0    0 01:48:55 Estab   7      7\n  DC1_SVC2A                192.168.255.5 4 65102            154       164    0    0 01:48:55 Estab   7      7\n  DC1_SVC2B                192.168.255.6 4 65102            153       164    0    0 01:48:55 Estab   7      7\n</code></pre> <pre><code>DC1_LEAF1A&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.3, local AS number 65101\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SPINE1               192.168.255.1 4 65001            166       163    0    0 01:49:19 Estab   14     14\n  DC1_SPINE2               192.168.255.2 4 65001            166       163    0    0 01:49:20 Estab   14     14\n</code></pre> <pre><code>DC1_LEAF1B&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.4, local AS number 65101\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SPINE1               192.168.255.1 4 65001            167       165    0    0 01:49:39 Estab   14     14\n  DC1_SPINE2               192.168.255.2 4 65001            167       160    0    0 01:49:39 Estab   14     14\n</code></pre> <pre><code>DC1_SVC2A&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.5, local AS number 65102\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SPINE1               192.168.255.1 4 65001            169       161    0    0 01:50:05 Estab   14     14\n  DC1_SPINE2               192.168.255.2 4 65001            165       155    0    0 01:50:05 Estab   14     14\n</code></pre> <pre><code>DC1_SVC2B&gt;show bgp evpn summary\nBGP summary information for VRF default\nRouter identifier 192.168.255.6, local AS number 65102\nNeighbor Status Codes: m - Under maintenance\n  Description              Neighbor      V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc\n  DC1_SPINE1               192.168.255.1 4 65001            166       162    0    0 01:50:22 Estab   14     14\n  DC1_SPINE2               192.168.255.2 4 65001            166       155    0    0 01:50:22 Estab   14     14\n</code></pre> MLAG DC1_LEAF1ADC1_LEAF1BDC1_SVC2ADC1_SVC2BDC1_L2_LEAF2ADC1_L2_LEAF2B <pre><code>DC1_LEAF1A&gt;show mlag\nMLAG Configuration:\ndomain-id                          :           DC1_LEAF1\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.1\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:57:aa:63\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   2\n\nDC1_LEAF1A&gt;\nDC1_LEAF1A&gt;show mlag interfaces\n                                                                                  local/remote\n   mlag       desc                              state       local       remote          status\n---------- --------------------------- ----------------- ----------- ------------ ------------\n      5       server01_PortChannel5       active-full         Po5          Po5           up/up\n      6       server02_PortChannel6       active-full         Po6          Po6           up/up\n</code></pre> <pre><code>DC1_LEAF1B&gt;show mlag\nMLAG Configuration:\ndomain-id                          :           DC1_LEAF1\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.0\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:57:aa:63\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   2\n\nDC1_LEAF1B&gt;\nDC1_LEAF1B&gt;show mlag interfaces\n                                                                                  local/remote\n   mlag       desc                              state       local       remote          status\n---------- --------------------------- ----------------- ----------- ------------ ------------\n      5       server01_PortChannel5       active-full         Po5          Po5           up/up\n      6       server02_PortChannel6       active-full         Po6          Po6           up/up\n</code></pre> <pre><code>DC1_SVC2A&gt;show mlag\nMLAG Configuration:\ndomain-id                          :            DC1_SVC2\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.5\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:01:0d:2d\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   1\n\nDC1_SVC2A&gt;\nDC1_SVC2A&gt;show mlag interfaces\n                                                                            local/remote\n   mlag       desc                        state       local       remote          status\n---------- --------------------- ----------------- ----------- ------------ ------------\n      5       DC1_L2_LEAF_Po1       active-full         Po5          Po5           up/up\n</code></pre> <pre><code>DC1_SVC2B&gt;show mlag\nMLAG Configuration:\ndomain-id                          :            DC1_SVC2\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.4\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:01:0d:2d\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   1\n\nDC1_SVC2B&gt;\nDC1_SVC2B&gt;show mlag interfaces\n                                                                            local/remote\n   mlag       desc                        state       local       remote          status\n---------- --------------------- ----------------- ----------- ------------ ------------\n      5       DC1_L2_LEAF_Po1       active-full         Po5          Po5           up/up\n</code></pre> <pre><code>DC1_L2_LEAF2A&gt;show mlag\nMLAG Configuration:\ndomain-id                          :         DC1_L2_LEAF\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.9\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:b1:62:4c\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   3\n\nDC1_L2_LEAF2A&gt;\nDC1_L2_LEAF2A&gt;show mlag interfaces\n                                                                                  local/remote\n   mlag       desc                              state       local       remote          status\n---------- --------------------------- ----------------- ----------- ------------ ------------\n      1       DC1_SVC2_Po5                active-full         Po1          Po1           up/up\n      5       server03_PortChannel5       active-full         Po5          Po5           up/up\n      6       server04_PortChannel6       active-full         Po6          Po6           up/up\n</code></pre> <pre><code>DC1_L2_LEAF2B&gt;show mlag\nMLAG Configuration:\ndomain-id                          :         DC1_L2_LEAF\nlocal-interface                    :            Vlan4094\npeer-address                       :        10.255.252.8\npeer-link                          :       Port-Channel3\npeer-config                        :          consistent\n\nMLAG Status:\nstate                              :              Active\nnegotiation status                 :           Connected\npeer-link status                   :                  Up\nlocal-int status                   :                  Up\nsystem-id                          :   02:1c:73:b1:62:4c\ndual-primary detection             :            Disabled\ndual-primary interface errdisabled :               False\n\nMLAG Ports:\nDisabled                           :                   0\nConfigured                         :                   0\nInactive                           :                   0\nActive-partial                     :                   0\nActive-full                        :                   3\n\nDC1_L2_LEAF2B&gt;\nDC1_L2_LEAF2B&gt;show mlag interfaces\n                                                                                  local/remote\n   mlag       desc                              state       local       remote          status\n---------- --------------------------- ----------------- ----------- ------------ ------------\n      1       DC1_SVC2_Po5                active-full         Po1          Po1           up/up\n      5       server03_PortChannel5       active-full         Po5          Po5           up/up\n      6       server04_PortChannel6       active-full         Po6          Po6           up/up\n</code></pre> VXLAN, VLAN to VNI Mappings, L3VNI and VRF Mappings DC1_LEAF1ADC1_LEAF1BDC1_SVC2ADC1_SVC2B <pre><code>DC1_LEAF1A&gt;show interfaces Vxlan 1\nVxlan1 is up, line protocol is up (connected)\n  Hardware is Vxlan\n  Description: DC1_LEAF1A_VTEP\n  Source interface is Loopback1 and is active with 192.168.254.3\n  Listening on UDP port 4789\n  Replication/Flood Mode is headend with Flood List Source: EVPN\n  Remote MAC learning via EVPN\n  VNI mapping to VLANs\n  Static VLAN to VNI mapping is\n    [110, 10110]      [111, 10111]\n  Dynamic VLAN to VNI mapping for 'evpn' is\n    [1199, 10]\n  Note: All Dynamic VLANs used by VCS are internal VLANs.\n        Use 'show vxlan vni' for details.\n  Static VRF to VNI mapping is\n   [Tenant_A_OP_Zone, 10]\n  MLAG Shared Router MAC is 021c.7357.aa63\n</code></pre> <pre><code>DC1_LEAF1B&gt;show interfaces Vxlan 1\nVxlan1 is up, line protocol is up (connected)\n  Hardware is Vxlan\n  Description: DC1_LEAF1B_VTEP\n  Source interface is Loopback1 and is active with 192.168.254.3\n  Listening on UDP port 4789\n  Replication/Flood Mode is headend with Flood List Source: EVPN\n  Remote MAC learning via EVPN\n  VNI mapping to VLANs\n  Static VLAN to VNI mapping is\n    [110, 10110]      [111, 10111]\n  Dynamic VLAN to VNI mapping for 'evpn' is\n    [1199, 10]\n  Note: All Dynamic VLANs used by VCS are internal VLANs.\n        Use 'show vxlan vni' for details.\n  Static VRF to VNI mapping is\n   [Tenant_A_OP_Zone, 10]\n  MLAG Shared Router MAC is 021c.7357.aa63\n</code></pre> <pre><code>DC1_SVC2A&gt;show interfaces Vxlan 1\nVxlan1 is up, line protocol is up (connected)\n  Hardware is Vxlan\n  Description: DC1_SVC2A_VTEP\n  Source interface is Loopback1 and is active with 192.168.254.5\n  Listening on UDP port 4789\n  Replication/Flood Mode is headend with Flood List Source: EVPN\n  Remote MAC learning via EVPN\n  VNI mapping to VLANs\n  Static VLAN to VNI mapping is\n    [112, 10112]      [113, 10113]\n  Dynamic VLAN to VNI mapping for 'evpn' is\n    [1199, 10]\n  Note: All Dynamic VLANs used by VCS are internal VLANs.\n        Use 'show vxlan vni' for details.\n  Static VRF to VNI mapping is\n   [Tenant_A_OP_Zone, 10]\n  MLAG Shared Router MAC is 021c.7301.0d2d\n</code></pre> <pre><code>DC1_SVC2B&gt;show interfaces Vxlan 1\nVxlan1 is up, line protocol is up (connected)\n  Hardware is Vxlan\n  Description: DC1_SVC2B_VTEP\n  Source interface is Loopback1 and is active with 192.168.254.5\n  Listening on UDP port 4789\n  Replication/Flood Mode is headend with Flood List Source: EVPN\n  Remote MAC learning via EVPN\n  VNI mapping to VLANs\n  Static VLAN to VNI mapping is\n    [112, 10112]      [113, 10113]\n  Dynamic VLAN to VNI mapping for 'evpn' is\n    [1199, 10]\n  Note: All Dynamic VLANs used by VCS are internal VLANs.\n        Use 'show vxlan vni' for details.\n  Static VRF to VNI mapping is\n   [Tenant_A_OP_Zone, 10]\n  MLAG Shared Router MAC is 021c.7301.0d2d\n</code></pre> <ul> <li>Login to the alpine-host clients using <code>docker exec</code></li> </ul> <pre><code>docker exec -it clab-avdirb-client1 /bin/sh\n</code></pre> Ping to gateway &amp; Remote hosts client1client2client3client4 <pre><code>/ $ ip addr show team0.110\n3: team0.110@team0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether aa:c1:ab:27:f2:6c brd ff:ff:ff:ff:ff:ff\n    inet 10.1.10.101/24 brd 10.1.10.255 scope global team0.110\n       valid_lft forever preferred_lft forever\n    inet6 fe80::a8c1:abff:fe27:f26c/64 scope link\n       valid_lft forever preferred_lft forever\n/ $\n/ $ # Ping to Gateway\n/ $ sudo ping -c 5 10.1.10.1\nPING 10.1.10.1 (10.1.10.1): 56 data bytes\n64 bytes from 10.1.10.1: seq=0 ttl=64 time=6.177 ms\n64 bytes from 10.1.10.1: seq=1 ttl=64 time=2.834 ms\n64 bytes from 10.1.10.1: seq=2 ttl=64 time=1.498 ms\n64 bytes from 10.1.10.1: seq=3 ttl=64 time=1.372 ms\n64 bytes from 10.1.10.1: seq=4 ttl=64 time=1.504 ms\n\n--- 10.1.10.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 1.372/2.677/6.177 ms\n/ $\n/ $ # Ping to client2\n/ $ sudo ping -c 5 10.1.11.102\nPING 10.1.11.102 (10.1.11.102): 56 data bytes\n64 bytes from 10.1.11.102: seq=0 ttl=63 time=3.794 ms\n64 bytes from 10.1.11.102: seq=1 ttl=63 time=2.010 ms\n64 bytes from 10.1.11.102: seq=2 ttl=63 time=1.918 ms\n64 bytes from 10.1.11.102: seq=3 ttl=63 time=1.409 ms\n64 bytes from 10.1.11.102: seq=4 ttl=63 time=1.811 ms\n\n--- 10.1.11.102 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 1.409/2.188/3.794 ms\n/ $\n/ $ # Ping to client3\n/ $ sudo ping -c 5 10.1.12.103\nPING 10.1.12.103 (10.1.12.103): 56 data bytes\n64 bytes from 10.1.12.103: seq=0 ttl=62 time=19.187 ms\n64 bytes from 10.1.12.103: seq=1 ttl=62 time=7.130 ms\n64 bytes from 10.1.12.103: seq=2 ttl=62 time=5.741 ms\n64 bytes from 10.1.12.103: seq=3 ttl=62 time=6.358 ms\n64 bytes from 10.1.12.103: seq=4 ttl=62 time=4.065 ms\n\n--- 10.1.12.103 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 4.065/8.496/19.187 ms\n/ $\n/ $ # Ping to client4\n/ $ sudo ping -c 5 10.1.13.104\nPING 10.1.13.104 (10.1.13.104): 56 data bytes\n64 bytes from 10.1.13.104: seq=0 ttl=62 time=17.055 ms\n64 bytes from 10.1.13.104: seq=1 ttl=62 time=4.802 ms\n64 bytes from 10.1.13.104: seq=2 ttl=62 time=6.559 ms\n64 bytes from 10.1.13.104: seq=3 ttl=62 time=6.602 ms\n64 bytes from 10.1.13.104: seq=4 ttl=62 time=5.060 ms\n\n--- 10.1.13.104 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 4.802/8.015/17.055 ms\n</code></pre> <pre><code>/ $ ip addr show team0.111\n3: team0.111@team0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether aa:c1:ab:72:02:d1 brd ff:ff:ff:ff:ff:ff\n    inet 10.1.11.102/24 brd 10.1.11.255 scope global team0.111\n       valid_lft forever preferred_lft forever\n    inet6 fe80::a8c1:abff:fe72:2d1/64 scope link\n       valid_lft forever preferred_lft forever\n/ $\n/ $ # Ping to Gateway\n/ $ sudo ping -c 5 10.1.11.1\nPING 10.1.11.1 (10.1.11.1): 56 data bytes\n64 bytes from 10.1.11.1: seq=0 ttl=64 time=3.545 ms\n64 bytes from 10.1.11.1: seq=1 ttl=64 time=1.333 ms\n64 bytes from 10.1.11.1: seq=2 ttl=64 time=1.245 ms\n64 bytes from 10.1.11.1: seq=3 ttl=64 time=0.901 ms\n64 bytes from 10.1.11.1: seq=4 ttl=64 time=0.819 ms\n\n--- 10.1.11.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 0.819/1.568/3.545 ms\n/ $\n/ $ # Ping to client1\n/ $ sudo ping -c 5 10.1.10.101\nPING 10.1.10.101 (10.1.10.101): 56 data bytes\n64 bytes from 10.1.10.101: seq=0 ttl=63 time=2.660 ms\n64 bytes from 10.1.10.101: seq=1 ttl=63 time=2.101 ms\n64 bytes from 10.1.10.101: seq=2 ttl=63 time=1.395 ms\n64 bytes from 10.1.10.101: seq=3 ttl=63 time=2.134 ms\n64 bytes from 10.1.10.101: seq=4 ttl=63 time=1.882 ms\n\n--- 10.1.10.101 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 1.395/2.034/2.660 ms\n/ $\n/ $ # Ping to client3\n/ $ sudo ping -c 5 10.1.12.103\nPING 10.1.12.103 (10.1.12.103): 56 data bytes\n64 bytes from 10.1.12.103: seq=0 ttl=62 time=17.315 ms\n64 bytes from 10.1.12.103: seq=1 ttl=62 time=5.343 ms\n64 bytes from 10.1.12.103: seq=2 ttl=62 time=6.110 ms\n64 bytes from 10.1.12.103: seq=3 ttl=62 time=5.370 ms\n64 bytes from 10.1.12.103: seq=4 ttl=62 time=5.957 ms\n\n--- 10.1.12.103 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 5.343/8.019/17.315 ms\n/ $\n/ $ # Ping to client4\n/ $ sudo ping -c 5 10.1.13.104\nPING 10.1.13.104 (10.1.13.104): 56 data bytes\n64 bytes from 10.1.13.104: seq=0 ttl=62 time=9.082 ms\n64 bytes from 10.1.13.104: seq=1 ttl=62 time=5.016 ms\n64 bytes from 10.1.13.104: seq=2 ttl=62 time=5.797 ms\n64 bytes from 10.1.13.104: seq=3 ttl=62 time=3.430 ms\n64 bytes from 10.1.13.104: seq=4 ttl=62 time=4.376 ms\n\n--- 10.1.13.104 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 3.430/5.540/9.082 ms\n</code></pre> <pre><code>/ $ ip addr show team0.112\n3: team0.112@team0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether aa:c1:ab:e6:20:f5 brd ff:ff:ff:ff:ff:ff\n    inet 10.1.12.103/24 brd 10.1.12.255 scope global team0.112\n       valid_lft forever preferred_lft forever\n    inet6 fe80::a8c1:abff:fee6:20f5/64 scope link\n       valid_lft forever preferred_lft forever\n/ $\n/ $ # Ping to Gateway\n/ $ sudo ping -c 5 10.1.12.1\nPING 10.1.12.1 (10.1.12.1): 56 data bytes\n64 bytes from 10.1.12.1: seq=0 ttl=64 time=2.343 ms\n64 bytes from 10.1.12.1: seq=1 ttl=64 time=2.243 ms\n64 bytes from 10.1.12.1: seq=2 ttl=64 time=2.383 ms\n64 bytes from 10.1.12.1: seq=3 ttl=64 time=1.583 ms\n64 bytes from 10.1.12.1: seq=4 ttl=64 time=2.322 ms\n\n--- 10.1.12.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 1.583/2.174/2.383 ms\n/ $\n/ $ # Ping to client1\n/ $ sudo ping -c 5 10.1.10.101\nPING 10.1.10.101 (10.1.10.101): 56 data bytes\n64 bytes from 10.1.10.101: seq=0 ttl=62 time=15.835 ms\n64 bytes from 10.1.10.101: seq=1 ttl=62 time=5.165 ms\n64 bytes from 10.1.10.101: seq=2 ttl=62 time=5.067 ms\n64 bytes from 10.1.10.101: seq=3 ttl=62 time=6.425 ms\n64 bytes from 10.1.10.101: seq=4 ttl=62 time=4.345 ms\n\n--- 10.1.10.101 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 4.345/7.367/15.835 ms\n/ $\n/ $ # Ping to client2\n/ $ sudo ping -c 5 10.1.11.102\nPING 10.1.11.102 (10.1.11.102): 56 data bytes\n64 bytes from 10.1.11.102: seq=0 ttl=62 time=8.623 ms\n64 bytes from 10.1.11.102: seq=1 ttl=62 time=6.560 ms\n64 bytes from 10.1.11.102: seq=2 ttl=62 time=5.666 ms\n64 bytes from 10.1.11.102: seq=3 ttl=62 time=4.498 ms\n64 bytes from 10.1.11.102: seq=4 ttl=62 time=5.077 ms\n\n--- 10.1.11.102 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 4.498/6.084/8.623 ms\n/ $\n/ $ # Ping to client4\n/ $ sudo ping -c 5 10.1.13.104\nPING 10.1.13.104 (10.1.13.104): 56 data bytes\n64 bytes from 10.1.13.104: seq=0 ttl=63 time=5.768 ms\n64 bytes from 10.1.13.104: seq=1 ttl=63 time=3.087 ms\n64 bytes from 10.1.13.104: seq=2 ttl=63 time=4.001 ms\n64 bytes from 10.1.13.104: seq=3 ttl=63 time=4.115 ms\n64 bytes from 10.1.13.104: seq=4 ttl=63 time=3.755 ms\n\n--- 10.1.13.104 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 3.087/4.145/5.768 ms\n</code></pre> <pre><code>/ $ ip addr show team0.113\n3: team0.113@team0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP qlen 1000\n    link/ether aa:c1:ab:0e:06:7d brd ff:ff:ff:ff:ff:ff\n    inet 10.1.13.104/24 brd 10.1.13.255 scope global team0.113\n       valid_lft forever preferred_lft forever\n    inet6 fe80::a8c1:abff:fe0e:67d/64 scope link\n       valid_lft forever preferred_lft forever\n/ $\n/ $ # Ping to Gateway\n/ $ sudo ping -c 5 10.1.13.1\nPING 10.1.13.1 (10.1.13.1): 56 data bytes\n64 bytes from 10.1.13.1: seq=0 ttl=64 time=9.897 ms\n64 bytes from 10.1.13.1: seq=1 ttl=64 time=4.338 ms\n64 bytes from 10.1.13.1: seq=2 ttl=64 time=2.396 ms\n64 bytes from 10.1.13.1: seq=3 ttl=64 time=2.683 ms\n64 bytes from 10.1.13.1: seq=4 ttl=64 time=2.481 ms\n\n--- 10.1.13.1 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 2.396/4.359/9.897 ms\n/ $\n/ $ # Ping to client1\n/ $ sudo ping -c 5 10.1.10.101\nPING 10.1.10.101 (10.1.10.101): 56 data bytes\n64 bytes from 10.1.10.101: seq=0 ttl=62 time=8.414 ms\n64 bytes from 10.1.10.101: seq=1 ttl=62 time=7.919 ms\n64 bytes from 10.1.10.101: seq=2 ttl=62 time=3.955 ms\n64 bytes from 10.1.10.101: seq=3 ttl=62 time=7.085 ms\n64 bytes from 10.1.10.101: seq=4 ttl=62 time=6.127 ms\n\n--- 10.1.10.101 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 3.955/6.700/8.414 ms\n/ $\n/ $ # Ping to client2\n/ $ sudo ping -c 5 10.1.11.102\nPING 10.1.11.102 (10.1.11.102): 56 data bytes\n64 bytes from 10.1.11.102: seq=0 ttl=62 time=6.925 ms\n64 bytes from 10.1.11.102: seq=1 ttl=62 time=7.298 ms\n64 bytes from 10.1.11.102: seq=2 ttl=62 time=6.092 ms\n64 bytes from 10.1.11.102: seq=3 ttl=62 time=7.421 ms\n64 bytes from 10.1.11.102: seq=4 ttl=62 time=7.135 ms\n\n--- 10.1.11.102 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 6.092/6.974/7.421 ms\n/ $\n/ $ # Ping to client3\n/ $ sudo ping -c 5 10.1.12.103\nPING 10.1.12.103 (10.1.12.103): 56 data bytes\n64 bytes from 10.1.12.103: seq=0 ttl=63 time=5.357 ms\n64 bytes from 10.1.12.103: seq=1 ttl=63 time=14.148 ms\n64 bytes from 10.1.12.103: seq=2 ttl=63 time=4.379 ms\n64 bytes from 10.1.12.103: seq=3 ttl=63 time=5.095 ms\n64 bytes from 10.1.12.103: seq=4 ttl=63 time=4.964 ms\n\n--- 10.1.12.103 ping statistics ---\n5 packets transmitted, 5 packets received, 0% packet loss\nround-trip min/avg/max = 4.379/6.788/14.148 ms\n</code></pre> <ul> <li>Using <code>arista.avd.eos_validate_state</code> to validate the actual / operational state as compared to the desired state. It generates CSV and Markdown reports of the result, which are stored under the <code>reports</code> directory.</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml --tags=verify\n</code></pre> Reveal Output <pre><code>reports/\n\u251c\u2500\u2500 DC1_FABRIC-state.csv\n\u2514\u2500\u2500 DC1_FABRIC-state.md\n</code></pre>"},{"location":"quickStart/#destroying-the-lab","title":"Destroying the lab","text":"<p>Use the <code>containerlab destroy</code> command to destroy the lab.</p> <pre><code>sudo containerlab destroy -t topology.yaml\n</code></pre> Tip <ul> <li>Use the <code>destroy</code> command with the <code>--cleanup</code> flag, to remove the containerlab lab directory and all its contents.</li> <li>Without this flag containerlab will preserve the lab directory in the current working directory.</li> <li>The lab directory name follows the <code>clab-&lt;lab_name&gt;</code> template, which in this example is <code>clab-avdirb</code> directory.</li> <li>This includes the contents of <code>/mnt/flash</code> such as <code>startup-config</code> etc and other containerlab artifacts.</li> <li>If the directory <code>clab-&lt;lab_name&gt;</code>, already exists, containerlab will initialize nodes using configuration files saved from the prior execution of the lab.</li> </ul>"},{"location":"references/","title":"Reference","text":""},{"location":"references/#alpine-host-configuration","title":"Alpine-host Configuration","text":""},{"location":"references/#teaming-configuration","title":"Teaming Configuration","text":"<p>If using alpine-host containers as end hosts/clients, the following teaming modes are supported:</p> <ul> <li> lacp</li> <li> static</li> <li> active-backup</li> <li> none (default)</li> </ul> <p>The teaming mode needs to be specified in the containerlab <code>topology.yml</code> file under the respective lab's directory.</p> Example<pre><code>    client1:\n      kind: linux\n      image: alpine-host\n      mgmt_ipv4: 172.100.100.10\n      env:\n        TMODE: lacp # (1)!\n    client2:\n      kind: linux\n      image: alpine-host\n      mgmt_ipv4: 172.100.100.11\n      env:\n        TMODE: static # (2)!\n    client3:\n      kind: linux\n      mgmt_ipv4: 172.100.100.10\n      env:\n        TMODE: active-backup # (3)!\n        TACTIVE: eth1 # (4)!\n</code></pre> <ol> <li>Sets teaming mode as <code>lacp</code> when teaming <code>eth1</code> and <code>eth2</code> on the client side.</li> <li>Sets teaming mode as <code>static</code> when teaming <code>eth1</code> and <code>eth2</code> on the client side.</li> <li>Sets the teaming mode as <code>active-backup</code> where the active interface on the client can be specified using <code>TACTIVE</code> setting below.</li> <li><code>TACTIVE</code> specified the active interface (ex. eth1) when using <code>active-backup</code> teaming mode as specified by <code>TMODE</code>. The other interface (ex. eth2) will be automatically set to backup.</li> </ol>"},{"location":"references/#teaming-status","title":"Teaming status","text":"<p>To check the teaming status on the client side. Login to the client container:</p> <pre><code>docker exec -it clab-avdirb-client1 /bin/sh\n</code></pre> <p>Use the <code>teamdctl</code> command to view the <code>team0</code> state.</p> Example<pre><code>/ $ sudo teamdctl team0 state view\nsetup:\n  runner: lacp\nports:\n  eth1\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\n    runner:\n      aggregator ID: 125, Selected\n      selected: yes\n      state: current\n  eth2\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\n    runner:\n      aggregator ID: 125, Selected\n      selected: yes\n      state: current\nrunner:\n  active: yes\n  fast rate: yes\n</code></pre>"},{"location":"references/#host-l3-configuration","title":"Host L3 Configuration","text":"<p>If using alpine-host as the end client, the client-side configuration can be done using:</p> <ol> <li>Using the <code>labs/evpn/avd_&lt;lab&gt;/host_l3_config/l3_build.sh</code>. The shell script contains the command to configure the VLAN, IP address, and Gateway route on the alpine-hosts. For example, refer to the Getting Started guide here.</li> <li>Manually using the following steps.</li> </ol> <pre><code># Login to the container\n$ docker exec -it clab-avdirb-client1 /bin/sh\n\n# Configure IP and VLAN\n/ $ sudo vconfig add team0 110\n/ $ sudo ifconfig team0.110 10.1.10.11 netmask 255.255.255.0\n/ $ sudo ip link set team0.110 up\n\n# Add route pointing to GW on the leaf switch\n/ $ sudo ip route add 10.1.0.0/16 via 10.1.10.1 dev team0.110\n\n# ping GW\n\n/ $ route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         172.100.100.1   0.0.0.0         UG    0      0        0 eth0\n10.1.0.0        10.1.10.1       255.255.0.0     UG    0      0        0 team0.110\n10.1.10.0       0.0.0.0         255.255.255.0   U     0      0        0 team0.110\n172.100.100.0   0.0.0.0         255.255.255.0   U     0      0        0 eth0\n\n/ $ sudo ping -c 2 10.1.10.1\nPING 10.1.10.1 (10.1.10.1): 56 data bytes\n64 bytes from 10.1.10.1: seq=0 ttl=64 time=20.531 ms\n64 bytes from 10.1.10.1: seq=1 ttl=64 time=5.946 ms\n\n--- 10.1.10.1 ping statistics ---\n2 packets transmitted, 2 packets received, 0% packet loss\nround-trip min/avg/max = 5.946/13.238/20.531 ms\n\n/ $ arp -a\n? (10.1.10.1) at 00:00:00:00:00:01 [ether]  on team0.110\n</code></pre>"},{"location":"references/#lab-deployment-using-makefile","title":"Lab Deployment using Makefile","text":"<p>Each lab contains a <code>Makefile</code>, which simplifies the lab deployment steps using the <code>make</code> command.</p> Example<pre><code>$ cd avd-cEOS-Lab/labs/evpn/avd_sym_irb\n\n$ make help\ndeploy                         Complete AVD &amp; cEOS-Lab Deployment\ndestroy                        Delete cEOS-Lab Deployment and AVD generated config and documentation\nhelp                           Display help message\n</code></pre> <p><code>make deploy</code> will perform the following actions</p> <ul> <li> Start the containerlab topology</li> <li> Generate and deploy switch configuration using AVD</li> <li> Configure the alpine-host clients.</li> </ul> <p><code>make destroy</code> will perform the following actions</p> <ul> <li> Destroy the containers and remove all the containerlab and the AVD generated configuration and artifacts.</li> </ul>"},{"location":"labs/avd_asym_irb/","title":"EVPN Asymmetric IRB","text":""},{"location":"labs/avd_asym_irb/#lab-overview","title":"Lab Overview","text":"Name avdasymirb Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 2 MLAG Leaf Pairs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_asym_irb</code> Reveal Topology"},{"location":"labs/avd_asym_irb/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_asym_irb\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_asym_multihoming/","title":"EVPN VXLAN All-active Multi-homing IRB","text":""},{"location":"labs/avd_asym_multihoming/#lab-overview","title":"Lab Overview","text":"Name aamh Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 4 PEs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_asym_multihoming</code> Reveal Topology"},{"location":"labs/avd_asym_multihoming/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_asym_multihoming\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_central_any_gw/","title":"EVPN Centralized Anycast Gateway","text":""},{"location":"labs/avd_central_any_gw/#lab-overview","title":"Lab Overview","text":"Name avdcentralgw Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 1 MLAG Compute leaf pairs + 1 MLAG Service Leaf pair + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_central_any_gw</code> Reveal Topology"},{"location":"labs/avd_central_any_gw/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_central_any_gw\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_dual_dc_l3_gw/","title":"EVPN VXLAN Dual DC L3 Gateway","text":""},{"location":"labs/avd_dual_dc_l3_gw/#lab-overview","title":"Lab Overview","text":"Name evpnl3gw Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC) Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_dual_dc_l3_gw</code> Reveal Topology"},{"location":"labs/avd_dual_dc_l3_gw/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_dual_dc_l3_gw\n</code></pre> <ul> <li>Deploy the cEOS-lab containers.</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI.</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients in DC1</li> </ul> <pre><code>bash host_l3_config/dc1_l3_build.sh\n</code></pre> <ul> <li>Configure the alpine-host clients in DC2</li> </ul> <pre><code>bash host_l3_config/dc2_l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_dual_dc_multi_domain/","title":"EVPN VXLAN Dual DC Multi-Domain","text":""},{"location":"labs/avd_dual_dc_multi_domain/#lab-overview","title":"Lab Overview","text":"Name evpnmultidomain Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC) Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_dual_dc_multi_domain</code> Reveal Topology"},{"location":"labs/avd_dual_dc_multi_domain/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_dual_dc_multi_domain\n</code></pre> <ul> <li>Deploy the cEOS-lab containers.</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI.</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients in DC1</li> </ul> <pre><code>bash host_l3_config/dc1_l3_build.sh\n</code></pre> <ul> <li>Configure the alpine-host clients in DC2</li> </ul> <pre><code>bash host_l3_config/dc2_l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_sym_irb/","title":"EVPN Symmetric IRB (eBGP)","text":""},{"location":"labs/avd_sym_irb/#lab-overview","title":"Lab Overview","text":"Name avdirb Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 2 MLAG Leaf Pairs + 2 L2 leafs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_sym_irb</code> Reveal Topology"},{"location":"labs/avd_sym_irb/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_sym_irb\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_sym_irb_ibgp/","title":"EVPN Symmetric IRB (iBGP)","text":""},{"location":"labs/avd_sym_irb_ibgp/#lab-overview","title":"Lab Overview","text":"Name avdirb Description iBGP Overlay and OSFP Underlay Devices 2 Spines + 2 MLAG Leaf Pairs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_sym_irb_ibgp</code> Reveal Topology"},{"location":"labs/avd_sym_irb_ibgp/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_sym_irb_ibgp\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/avd_sym_sa_multihoming/","title":"EVPN Single-Active Multihoming Symmetric IRB","text":""},{"location":"labs/avd_sym_sa_multihoming/#lab-overview","title":"Lab Overview","text":"Name samh Description eBGP Overlay and eBGP Underlay Devices 2 Spines + 4 PEs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/evpn/avd_sym_sa_multihoming</code> Reveal Topology"},{"location":"labs/avd_sym_sa_multihoming/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/evpn/avd_sym_sa_multihoming\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/mpls_evpn_irb/","title":"EVPN All-Active Multihoming IRB with MPLS Underlay","text":""},{"location":"labs/mpls_evpn_irb/#lab-overview","title":"Lab Overview","text":"Name mplsevpnirb Description iBGP Overlay and MPLS Underlay Devices 2 Ps + 4 PEs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/mpls_ldp_evpn/mpls_evpn_irb</code> Reveal Topology NOTE <p>This lab does not use <code>arista.avd.eos_designs</code>, rather uses <code>arista.avd.eos_cli_config_gen</code> to build device configuration from pre-built structured configuration files.</p>"},{"location":"labs/mpls_evpn_irb/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/mpls_ldp_evpn/mpls_evpn_irb\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"labs/mpls_ldp_l2evpn/","title":"EVPN MPLS LDP All-Active Multihoming (L2EVPN)","text":""},{"location":"labs/mpls_ldp_l2evpn/#lab-overview","title":"Lab Overview","text":"Name mplsl2evpn Description iBGP Overlay and MPLS Underlay Devices 2 Ps + 4 PEs + 4 Clients Lab Directory <code>avd-cEOS-Lab/labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code> Reveal Topology NOTE <p>This lab does not use <code>arista.avd.eos_designs</code>, rather uses <code>arista.avd.eos_cli_config_gen</code> to build device configuration from pre-built structured configuration files.</p>"},{"location":"labs/mpls_ldp_l2evpn/#deploy-lab","title":"Deploy Lab","text":"<ul> <li>Navigate to the lab directory</li> </ul> <pre><code>cd avd-cEOS-Lab/labs/mpls_ldp_evpn/mpls_ldp_l2evpn\n</code></pre> <ul> <li>Deploy the cEOS-lab containers</li> </ul> <pre><code>sudo containerlab deploy -t topology.yaml\n</code></pre> <ul> <li>Build and deploy the configuration to the switches using eAPI</li> </ul> <pre><code>ansible-playbook playbooks/fabric-deploy-config.yaml\n</code></pre> <ul> <li>Configure the alpine-host clients</li> </ul> <pre><code>bash host_l3_config/l3_build.sh\n</code></pre> Info <p>For detailed deployment and validation steps please refer to the commands and example in the Getting Started guide.</p>"},{"location":"releases/v1.1.2/","title":"v1.1.2","text":""},{"location":"releases/v1.1.2/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>]"},{"location":"releases/v1.1.2/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.14.4 arista.avd 2.2.0 arista.eos 2.1.2 Note <p>containerlab=0.15 changes and support added in next release.</p>"},{"location":"releases/v2.0.0/","title":"v2.0.0","text":""},{"location":"releases/v2.0.0/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>]"},{"location":"releases/v2.0.0/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.15 and above arista.avd 2.2.0 arista.eos 2.1.2"},{"location":"releases/v2.0.0/#changes","title":"Changes","text":"<ul> <li>Updated <code>topology.yaml</code> files per lab to support new containerlab v0.15 syntax</li> <li>The last containerlab=0.14.4 compatible release is v1.1.2</li> </ul>"},{"location":"releases/v2.1.0/","title":"v2.1.0","text":""},{"location":"releases/v2.1.0/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>]"},{"location":"releases/v2.1.0/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.15 and above arista.avd 2.2.1 arista.eos 2.1.2"},{"location":"releases/v2.1.0/#changes","title":"Changes","text":"<ul> <li>Added new lab for EVPN Asymmetric VXLAN All-active Multi-homing Integrated Routing and Bridging.</li> <li>Updated <code>entrypoint.sh</code> for alpine-host, adding support for configuring <code>active-backup</code> teaming for upcoming <code>EVPN Single-Active Multihoming</code> lab.</li> </ul> <pre><code>    client3:\n      kind: linux\n      mgmt_ipv4: 172.100.100.10\n      env:\n        TMODE: active-backup\n        TACTIVE: eth1\n</code></pre>"},{"location":"releases/v2.2.0/","title":"v2.2.0","text":""},{"location":"releases/v2.2.0/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>]"},{"location":"releases/v2.2.0/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.15 and above arista.avd 2.2.1 arista.eos 2.1.2"},{"location":"releases/v2.2.0/#changes","title":"Changes","text":"<ul> <li>Added two new labs<ul> <li>MPLS LDP L2EVPN</li> <li>MPLS LDP EVPN IRB </li> </ul> </li> </ul>"},{"location":"releases/v3.0.0/","title":"v3.0.0","text":""},{"location":"releases/v3.0.0/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>]"},{"location":"releases/v3.0.0/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.20 arista.avd 3.1.0 arista.eos 3.1.0"},{"location":"releases/v3.0.0/#changes","title":"Changes","text":"<ul> <li>Updated the lab files to be compatible with data model changes from avd v3.0.0</li> </ul>"},{"location":"releases/v3.1.0/","title":"v3.1.0","text":""},{"location":"releases/v3.1.0/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>] EVPN VXLAN Single-Active Multihoming Symmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_sym_sa_multihoming</code>]"},{"location":"releases/v3.1.0/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.25.1 arista.avd 3.3.3 arista.eos 4.1.1"},{"location":"releases/v3.1.0/#changes","title":"Changes","text":"<ul> <li>Updated labs to the latest AVD 3.3.x data models</li> <li>Updated Lab diagrams</li> <li>Added new lab <code>EVPN Single-Active Multihoming Symmetric IRB</code></li> <li>Made gNMI configuration optional.</li> </ul>"},{"location":"releases/v3.1.1/","title":"v3.1.1","text":""},{"location":"releases/v3.1.1/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>] EVPN VXLAN Single-Active Multihoming Symmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_sym_sa_multihoming</code>]"},{"location":"releases/v3.1.1/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.33.0 arista.avd 3.7.0 arista.eos 6.0.0"},{"location":"releases/v3.1.1/#changes","title":"Changes","text":"<ul> <li>Updated lab templates to add more secure ciphers to cEOS-Lab SSL profile applied for eAPI.</li> </ul> <pre><code>  13   \u2502 !\n  14   \u2502 management security\n  15   \u2502    ssl profile eAPI\n  16   \u2502       cipher-list HIGH:!eNULL:!aNULL:!MD5:!ADH:!ANULL\n  17   \u2502       certificate eAPI.crt key eAPI.key\n  18   \u2502 !\n  19   \u2502 management api http-commands\n  20   \u2502    protocol https ssl profile eAPI\n  21   \u2502    no shutdown\n  22   \u2502    !\n  23   \u2502    vrf MGMT\n  24   \u2502       no shutdown\n  25   \u2502 !\n</code></pre> <ul> <li>Added Makefile for easier lab deployment and cleanup</li> </ul>"},{"location":"releases/v3.1.2/","title":"v3.1.2","text":""},{"location":"releases/v3.1.2/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>] EVPN VXLAN Single-Active Multihoming Symmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_sym_sa_multihoming</code>]"},{"location":"releases/v3.1.2/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.47.2 arista.avd 4.4.0 arista.eos 6.1.2"},{"location":"releases/v3.1.2/#changes","title":"Changes","text":"<ul> <li>Updated lab templates to add arista.avd.eos_validate_state examples in the playbook run.</li> </ul> <pre><code>  22   \u2502     - name: Validate states on EOS devices\n  23   \u2502       tags: [verify, never]\n  24   \u2502       import_role:\n  25   \u2502         name: arista.avd.eos_validate_state\n</code></pre> <ul> <li>Updated lab templates to add arista.avd.eos_snapshot examples in the playbook run.</li> </ul> <pre><code>   3   \u2502   tasks:\n   4   \u2502     - name: Generate EOS configuration Snapshots\n   5   \u2502       tags: [snapshot]\n   6   \u2502       import_role:\n   7   \u2502         name: arista.avd.eos_snapshot\n</code></pre> <ul> <li>Updated lab variables to avoid depraction warnings as part of AVD 4.x.x</li> </ul>"},{"location":"releases/v3.1.3/","title":"v3.1.3","text":""},{"location":"releases/v3.1.3/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>] EVPN VXLAN Single-Active Multihoming Symmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_sym_sa_multihoming</code>]"},{"location":"releases/v3.1.3/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.47.2 arista.avd 4.4.0 arista.eos 6.1.2"},{"location":"releases/v3.1.3/#changes","title":"Changes","text":"<ul> <li>New documentation is now available here.</li> </ul>"},{"location":"releases/v3.1.4/","title":"v3.1.4","text":""},{"location":"releases/v3.1.4/#available-labs","title":"Available Labs","text":"Lab Underlay/Overlay Protocol Nodes Folder EVPN Symmetric IRB (eBGP Overlay and eBGP Underlay) (2 Spine + 2 MLAG Leaf Pair + 2 L2 leaf + 4 Clients) [<code>labs/evpn/avd_sym_irb/</code>] EVPN Symmetric IRB (iBGP Overlay and OSFP Underlay) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_sym_irb_ibgp</code>] EVPN Asymmetric IRB ( eBGP Overlay and eBGP Underlay ) (2 Spine + 2 MLAG Leaf Pair + 4 Clients) [<code>labs/evpn/avd_asym_irb</code>] EVPN Centralized Anycast Gateway ( eBGP Overlay and eBGP Underlay ) ( 2 spine + 1 MLAG Compute leaf pair + 1 MLAG Service Leaf pair + 4 Clients ) [<code>labs/evpn/avd_central_any_gw</code>] EVPN VXLAN All-Active Multihoming Asymmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_asym_multihoming</code>] EVPN MPLS LDP All-Active Multihoming (L2EVPN) (iBGP Overlay and MPLS Underlay) (2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_ldp_l2evpn</code>] EVPN VXLAN Dual DC L3 Gateway (eBGP Overlay and eBGP Underlay) 2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC) [<code>/labs/evpn/avd_dual_dc_l3_gw</code>] EVPN VXLAN Dual DC Multi-Domain (eBGP Overlay and eBGP Underlay) 2 Spines + 2 MLAG Leaf Pairs + 2 Border Leaves + 4 Clients (per DC) [<code>/labs/evpn/avd_dual_dc_multi_domain</code>] EVPN All-Active Multihoming IRB with MPLS Underlay (iBGP Overlay and MPLS Underlay) 2 Ps + 4 PEs + 4 Clients) [<code>labs/mpls_ldp_evpn/mpls_evpn_irb</code>] EVPN VXLAN Single-Active Multihoming Symmetric IRB (eBGP Overlay and eBGP Underlay) 2 Spines + 4 PEs + 4 Clients [<code>/labs/evpn/avd_sym_sa_multihoming</code>]"},{"location":"releases/v3.1.4/#supported-and-tested-versions","title":"Supported and Tested Versions","text":"Package Version containerlab 0.57.3 arista.avd 4.10.2 arista.eos 10.0.0 pyavd 4.10.2"},{"location":"releases/v3.1.4/#changes","title":"Changes","text":"<ul> <li>New documentation is now available here.</li> </ul>"}]}